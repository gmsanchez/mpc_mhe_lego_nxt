<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>CasADi: sx_function.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname"><a href="http://casadi.org"><img src="/api/html/casadi.png" alt="CasADi" height="55px"/></a>&#160;<span>internal API<sup style="font-size:30%">(<a href="../../../html/index.html">switch to public</a>)</sup></span> - <a href="https://github.com/casadi/casadi/tree/40d1934d2cb4eb46565debb8477cb04f4a3e2729" id="40d1934d2cb4eb46565debb8477cb04f4a3e2729" >revision 3.0.0</a></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Function&#160;overview</span></a></li>
      <li><a href="../../da/da4/classcasadi_1_1Function.html"><span>Function</span></a></li>
      <li><a href="../../usergroup0.html"><span>Expression&#160;graphs</span></a></li>
      <li><a href="../../usergroup1.html"><span>Solvers</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_2c2314939267d1c2b8853bb59ef27393.html">casadi</a></li><li class="navelem"><a class="el" href="../../dir_d3f702df5899af83d48ebd5a6235f692.html">core</a></li><li class="navelem"><a class="el" href="../../dir_c8cff01c0844b70ea7cbe6a0191f40f7.html">function</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">sx_function.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *    This file is part of CasADi.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *    CasADi -- A symbolic framework for dynamic optimization.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *    Copyright (C) 2010-2014 Joel Andersson, Joris Gillis, Moritz Diehl,</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *                            K.U. Leuven. All rights reserved.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *    Copyright (C) 2011-2014 Greg Horn</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *    CasADi is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *    modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *    License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *    version 3 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *    CasADi is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *    but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *    Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *    You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *    License along with CasADi; if not, write to the Free Software</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;sx_function.hpp&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;limits&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;stack&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;deque&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;iomanip&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;../std_vector_tools.hpp&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;../sx/sx_node.hpp&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;../casadi_types.hpp&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;../sparsity_internal.hpp&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;../global_options.hpp&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;../casadi_interrupt.hpp&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../d7/d23/namespacecasadi.html">casadi</a> {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keyword">using namespace </span><a class="code" href="../../d8/dcc/namespacestd.html">std</a>;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#afd0b8a9ae91af6aedbc87d1b588581fd">   45</a></span>&#160;  <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#afd0b8a9ae91af6aedbc87d1b588581fd">SXFunction::SXFunction</a>(<span class="keyword">const</span> std::string&amp; name,</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                         <span class="keyword">const</span> vector&lt;SX &gt;&amp; inputv,</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                                         <span class="keyword">const</span> vector&lt;SX &gt;&amp; outputv)</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    : <a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html">XFunction</a>&lt;<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html">SXFunction</a>, <a class="code" href="../../dd/df2/singletoncasadi_1_1Matrix.html">SX</a>, <a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html">SXNode</a>&gt;(name, inputv, outputv) {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    casadi_assert(!<a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afba7ecdd21e074f07f151ad5a4ed43dc">outputv_</a>.empty()); <span class="comment">// NOTE: Remove?</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment">// Reset OpenCL memory</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#ifdef WITH_OPENCL</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    kernel_ = 0;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    program_ = 0;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    sp_fwd_kernel_ = 0;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    sp_adj_kernel_ = 0;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    sp_program_ = 0;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#endif // WITH_OPENCL</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment">// Default (persistent) options</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#aa4d5f13f07d9f54de814350d27b06b23">just_in_time_opencl_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#aff3e0736235aa7db6e47284aee89e24d">just_in_time_sparsity_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  }</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#ab7e15da195f1cd90babb987a31bc5659">   65</a></span>&#160;  <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ab7e15da195f1cd90babb987a31bc5659">SXFunction::~SXFunction</a>() {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">// Free OpenCL memory</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#ifdef WITH_OPENCL</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    freeOpenCL();</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    spFreeOpenCL();</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#endif // WITH_OPENCL</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#af5d5f08f603559b2d988a0c5acc17a29">   73</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#af5d5f08f603559b2d988a0c5acc17a29">SXFunction::eval</a>(<span class="keywordtype">void</span>* mem, <span class="keyword">const</span> <span class="keywordtype">double</span>** arg, <span class="keywordtype">double</span>** res, <span class="keywordtype">int</span>* iw, <span class="keywordtype">double</span>* w)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    casadi_msg(<span class="stringliteral">&quot;SXFunction::eval():begin  &quot;</span> &lt;&lt; <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a47fdf0f1c66ad9b45a24347cea290543">name_</a>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment">// Make sure no free parameters</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ad83ba546e0240c2bc9586b0bf1e55e54">free_vars_</a>.empty()) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      std::stringstream ss;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#ae2ab333a4f258b34f5047b97bc366adf">repr</a>(ss);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      casadi_error(<span class="stringliteral">&quot;Cannot evaluate \&quot;&quot;</span> &lt;&lt; ss.str() &lt;&lt; <span class="stringliteral">&quot;\&quot; since variables &quot;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                   &lt;&lt; <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ad83ba546e0240c2bc9586b0bf1e55e54">free_vars_</a> &lt;&lt; <span class="stringliteral">&quot; are free.&quot;</span>);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">// NOTE: The implementation of this function is very delicate. Small changes in the</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// class structure can cause large performance losses. For this reason,</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">// the preprocessor macros are used below</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">// Evaluate the algorithm</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp;&amp; e : <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <span class="keywordflow">switch</span> (e.op) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        CASADI_MATH_FUN_BUILTIN(w[e.i1], w[e.i2], w[e.i0])</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a69909c231708b235ccc215d93ca907f8">OP_CONST</a>: w[e.i0] = e.d; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a772d0d4a7fe8303114d42995378698d1">OP_INPUT</a>: w[e.i0] = arg[e.i1]==0 ? 0 : arg[e.i1][e.i2]; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a521a7c58943e1b877b6e73d79948cb68">OP_OUTPUT</a>: <span class="keywordflow">if</span> (res[e.i0]!=0) res[e.i0][e.i2] = w[e.i1]; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        casadi_error(<span class="stringliteral">&quot;SXFunction::eval: Unknown operation&quot;</span> &lt;&lt; e.op);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    casadi_msg(<span class="stringliteral">&quot;SXFunction::eval():end &quot;</span> &lt;&lt; <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a47fdf0f1c66ad9b45a24347cea290543">name_</a>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#a4aa9d894bbe2bd9cab124b928562bf44">  105</a></span>&#160;  <a class="code" href="../../dd/df2/singletoncasadi_1_1Matrix.html">SX</a> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a4aa9d894bbe2bd9cab124b928562bf44">SXFunction::hess</a>(<span class="keywordtype">int</span> iind, <span class="keywordtype">int</span> oind) {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    casadi_assert_message(<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#aff5fde032442f1708b74357109d73287">sparsity_out</a>(oind).is_scalar(<span class="keyword">false</span>), <span class="stringliteral">&quot;Function must be scalar&quot;</span>);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="../../dd/df2/singletoncasadi_1_1Matrix.html">SX</a> g = <a class="code" href="../../d7/d23/namespacecasadi.html#aa335c95e9332e9cdb908ca59f46b44ce">densify</a>(<a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afb176828928480711f1af2d541faa437">grad</a>(iind, oind));</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">verbose</a>())  <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;SXFunction::hess: calculating gradient done &quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">// Create function</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="../../d7/d23/namespacecasadi.html#ac0b357d13f0080474277728f87d771c2">Dict</a> opts;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    opts[<span class="stringliteral">&quot;verbose&quot;</span>] = <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a9aad1ad97e03b7e446c0419449426323">verbose_</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="../../da/da4/classcasadi_1_1Function.html">Function</a> gfcn(<span class="stringliteral">&quot;gfcn&quot;</span>, {<a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afadcdcae1e6a79c094eaaed70dc86530">inputv_</a>.at(iind)}, {g}, opts);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// Calculate jacobian of gradient</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">verbose</a>()) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;SXFunction::hess: calculating Jacobian &quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="../../dd/df2/singletoncasadi_1_1Matrix.html">SX</a> ret = <a class="code" href="../../dd/df2/singletoncasadi_1_1Matrix.html#a31af7f3ba2c1b8839872855a4b3cba9d">SX::jac</a>(gfcn, 0, 0, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">verbose</a>()) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;SXFunction::hess: calculating Jacobian done&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// Return jacobian of the gradient</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#aea8b575787346d444e9778cdeb3fd6da">  128</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#aea8b575787346d444e9778cdeb3fd6da">SXFunction::is_smooth</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">// Go through all nodes and check if any node is non-smooth</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">for</span> (vector&lt;AlgEl&gt;::const_iterator it = <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.begin(); it!=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.end(); ++it) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <span class="keywordflow">if</span> (!operation_checker&lt;SmoothChecker&gt;(it-&gt;op)) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#a47550e6a73cc21525a545a6ee97f8188">  138</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a47550e6a73cc21525a545a6ee97f8188">SXFunction::print</a>(ostream &amp;stream)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#ac8ef992a939d171eb3563ece70112909">FunctionInternal::print</a>(stream);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">// Iterator to free variables</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    vector&lt;SXElem&gt;::const_iterator p_it = <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ad83ba546e0240c2bc9586b0bf1e55e54">free_vars_</a>.begin();</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">// Normal, interpreted output</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">for</span> (vector&lt;AlgEl&gt;::const_iterator it = <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.begin(); it!=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.end(); ++it) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <a class="code" href="../../d7/d38/classcasadi_1_1InterruptHandler.html#a49091eb550d4bf8da4f31e49835608df">InterruptHandler::check</a>();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="keywordflow">if</span> (it-&gt;op==<a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a521a7c58943e1b877b6e73d79948cb68">OP_OUTPUT</a>) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        stream &lt;&lt; <span class="stringliteral">&quot;output[&quot;</span> &lt;&lt; it-&gt;i0 &lt;&lt; <span class="stringliteral">&quot;][&quot;</span> &lt;&lt; it-&gt;i2 &lt;&lt; <span class="stringliteral">&quot;] = @&quot;</span> &lt;&lt; it-&gt;i1;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        stream &lt;&lt; <span class="stringliteral">&quot;@&quot;</span> &lt;&lt; it-&gt;i0 &lt;&lt; <span class="stringliteral">&quot; = &quot;</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">if</span> (it-&gt;op==<a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a772d0d4a7fe8303114d42995378698d1">OP_INPUT</a>) {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;          stream &lt;&lt; <span class="stringliteral">&quot;input[&quot;</span> &lt;&lt; it-&gt;i1 &lt;&lt; <span class="stringliteral">&quot;][&quot;</span> &lt;&lt; it-&gt;i2 &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;          <span class="keywordflow">if</span> (it-&gt;op==<a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a69909c231708b235ccc215d93ca907f8">OP_CONST</a>) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            stream &lt;&lt; it-&gt;d;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (it-&gt;op==<a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618aae6785283527a2b4903fa3aa9f56d3d6">OP_PARAMETER</a>) {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            stream &lt;&lt; *p_it++;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="keywordtype">int</span> ndep = <a class="code" href="../../d2/d93/structcasadi_1_1casadi__math.html#aa55eca120fe70408b53fa684d77dbb36">casadi_math&lt;double&gt;::ndeps</a>(it-&gt;op);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <a class="code" href="../../d2/d93/structcasadi_1_1casadi__math.html#a46f4551b57cf8bd5aae7ba500092a2d2">casadi_math&lt;double&gt;::printPre</a>(it-&gt;op, stream);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c&lt;ndep; ++c) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;              <span class="keywordflow">if</span> (c==0) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                stream &lt;&lt; <span class="stringliteral">&quot;@&quot;</span> &lt;&lt; it-&gt;i1;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;              } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                <a class="code" href="../../d2/d93/structcasadi_1_1casadi__math.html#a24738264198d8ce887b327247da83f97">casadi_math&lt;double&gt;::printSep</a>(it-&gt;op, stream);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                stream &lt;&lt; <span class="stringliteral">&quot;@&quot;</span> &lt;&lt; it-&gt;i2;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;              }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <a class="code" href="../../d2/d93/structcasadi_1_1casadi__math.html#aa2d8b868fb9bdb88bddc0076d5b99176">casadi_math&lt;double&gt;::printPost</a>(it-&gt;op, stream);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;          }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      stream &lt;&lt; <span class="stringliteral">&quot;;&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#a16db43aaefcb2d4979ea884df0b72032">  178</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a16db43aaefcb2d4979ea884df0b72032">SXFunction::generateDeclarations</a>(<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html">CodeGenerator</a>&amp; g)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="comment">// Make sure that there are no free variables</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ad83ba546e0240c2bc9586b0bf1e55e54">free_vars_</a>.empty()) {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      casadi_error(<span class="stringliteral">&quot;Code generation is not possible since variables &quot;</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                   &lt;&lt; <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ad83ba546e0240c2bc9586b0bf1e55e54">free_vars_</a> &lt;&lt; <span class="stringliteral">&quot; are free.&quot;</span>);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#a52c4596c5d3f7fc44f721c7bd6bbdf93">  187</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a52c4596c5d3f7fc44f721c7bd6bbdf93">SXFunction::generateBody</a>(<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html">CodeGenerator</a>&amp; g)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">// Which variables have been declared</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    vector&lt;bool&gt; declared(<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a3a1e4edbb5b0d906e280b3ffb4d9068e">sz_w</a>(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">// Run the algorithm</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">for</span> (vector&lt;AlgEl&gt;::const_iterator it = <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.begin(); it!=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.end(); ++it) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="comment">// Indent</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="keywordflow">if</span> (it-&gt;op==<a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a521a7c58943e1b877b6e73d79948cb68">OP_OUTPUT</a>) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;if (res[&quot;</span> &lt;&lt; it-&gt;i0 &lt;&lt; <span class="stringliteral">&quot;]!=0) &quot;</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;res[&quot;</span>&lt;&lt; it-&gt;i0 &lt;&lt; <span class="stringliteral">&quot;][&quot;</span> &lt;&lt; it-&gt;i2 &lt;&lt; <span class="stringliteral">&quot;]=&quot;</span> &lt;&lt; <span class="stringliteral">&quot;a&quot;</span> &lt;&lt; it-&gt;i1;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="comment">// Declare result if not already declared</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">if</span> (!declared[it-&gt;i0]) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;          g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;real_t &quot;</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;          declared[it-&gt;i0]=<span class="keyword">true</span>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="comment">// Where to store the result</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;a&quot;</span> &lt;&lt; it-&gt;i0 &lt;&lt; <span class="stringliteral">&quot;=&quot;</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="comment">// What to store</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">if</span> (it-&gt;op==<a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a69909c231708b235ccc215d93ca907f8">OP_CONST</a>) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;          g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#a959644c919d2d5bbbc254e747f585e51">constant</a>(it-&gt;d);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (it-&gt;op==<a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a772d0d4a7fe8303114d42995378698d1">OP_INPUT</a>) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;          g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;arg[&quot;</span> &lt;&lt; it-&gt;i1 &lt;&lt; <span class="stringliteral">&quot;] ? arg[&quot;</span> &lt;&lt; it-&gt;i1 &lt;&lt; <span class="stringliteral">&quot;][&quot;</span> &lt;&lt; it-&gt;i2 &lt;&lt; <span class="stringliteral">&quot;] : 0&quot;</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;          <span class="keywordtype">int</span> ndep = <a class="code" href="../../d2/d93/structcasadi_1_1casadi__math.html#aa55eca120fe70408b53fa684d77dbb36">casadi_math&lt;double&gt;::ndeps</a>(it-&gt;op);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;          <a class="code" href="../../d2/d93/structcasadi_1_1casadi__math.html#a46f4551b57cf8bd5aae7ba500092a2d2">casadi_math&lt;double&gt;::printPre</a>(it-&gt;op, g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c&lt;ndep; ++c) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="keywordflow">if</span> (c==0) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;              g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;a&quot;</span> &lt;&lt; it-&gt;i1;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;              <a class="code" href="../../d2/d93/structcasadi_1_1casadi__math.html#a24738264198d8ce887b327247da83f97">casadi_math&lt;double&gt;::printSep</a>(it-&gt;op, g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;              g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;a&quot;</span> &lt;&lt; it-&gt;i2;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;          }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          <a class="code" href="../../d2/d93/structcasadi_1_1casadi__math.html#aa2d8b868fb9bdb88bddc0076d5b99176">casadi_math&lt;double&gt;::printPost</a>(it-&gt;op, g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a>);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a>  &lt;&lt; <span class="stringliteral">&quot;;&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <a class="code" href="../../db/d35/structcasadi_1_1Options.html">Options</a> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae67b1832e029b5cd7f320737dc2d9ad6">SXFunction::options_</a></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  = {{&amp;<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a9252cd85e4aaad15d021833146b59401">FunctionInternal::options_</a>},</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;     {{<span class="stringliteral">&quot;default_in&quot;</span>,</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;       {<a class="code" href="../../d7/d23/namespacecasadi.html#a74a07d00866ce86187cc0f081d340015ac06f59cf6da05161b5feaf28ae9b78a3">OT_DOUBLEVECTOR</a>,</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="stringliteral">&quot;Default input values&quot;</span>}},</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      {<span class="stringliteral">&quot;just_in_time_sparsity&quot;</span>,</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;       {<a class="code" href="../../d7/d23/namespacecasadi.html#a74a07d00866ce86187cc0f081d340015ab443a65f334c43316aa16dea55e65960">OT_BOOL</a>,</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="stringliteral">&quot;Propagate sparsity patterns using just-in-time &quot;</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="stringliteral">&quot;compilation to a CPU or GPU using OpenCL&quot;</span>}},</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      {<span class="stringliteral">&quot;just_in_time_opencl&quot;</span>,</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;       {<a class="code" href="../../d7/d23/namespacecasadi.html#a74a07d00866ce86187cc0f081d340015ab443a65f334c43316aa16dea55e65960">OT_BOOL</a>,</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="stringliteral">&quot;Just-in-time compilation for numeric evaluation using OpenCL (experimental)&quot;</span>}},</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      {<span class="stringliteral">&quot;live_variables&quot;</span>,</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;       {<a class="code" href="../../d7/d23/namespacecasadi.html#a74a07d00866ce86187cc0f081d340015ab443a65f334c43316aa16dea55e65960">OT_BOOL</a>,</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="stringliteral">&quot;Reuse variables in the work vector&quot;</span>}}</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;     }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  };</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#a5c3980a557364a6853c17e9abcf6030a">  251</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a5c3980a557364a6853c17e9abcf6030a">SXFunction::init</a>(<span class="keyword">const</span> <a class="code" href="../../d7/d23/namespacecasadi.html#ac0b357d13f0080474277728f87d771c2">Dict</a>&amp; opts) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">// Call the init function of the base class</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#ac60489b2183943b68a652f4f524f848a">XFunction&lt;SXFunction, SX, SXNode&gt;::init</a>(opts);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">// Default (temporary) options</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordtype">bool</span> live_variables = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="comment">// Read options</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp;&amp; op : opts) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="keywordflow">if</span> (op.first==<span class="stringliteral">&quot;default_in&quot;</span>) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae431efa6e8fddc3a72d31da0cc6f2187">default_in_</a> = op.second;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op.first==<span class="stringliteral">&quot;live_variables&quot;</span>) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        live_variables = op.second;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op.first==<span class="stringliteral">&quot;just_in_time_opencl&quot;</span>) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#aa4d5f13f07d9f54de814350d27b06b23">just_in_time_opencl_</a> = op.second;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op.first==<span class="stringliteral">&quot;just_in_time_sparsity&quot;</span>) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#aff3e0736235aa7db6e47284aee89e24d">just_in_time_sparsity_</a> = op.second;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">// Check/set default inputs</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae431efa6e8fddc3a72d31da0cc6f2187">default_in_</a>.empty()) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae431efa6e8fddc3a72d31da0cc6f2187">default_in_</a>.resize(<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a85e89a48263b1f8c6902a029f39d5ebe">n_in</a>(), 0);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      casadi_assert_message(<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae431efa6e8fddc3a72d31da0cc6f2187">default_in_</a>.size()==<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a85e89a48263b1f8c6902a029f39d5ebe">n_in</a>(),</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                            <span class="stringliteral">&quot;Option &#39;default_in&#39; has incorrect length&quot;</span>);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// Stack used to sort the computational graph</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    stack&lt;SXNode*&gt; s;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="comment">// All nodes</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    vector&lt;SXNode*&gt; nodes;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">// Add the list of nodes</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordtype">int</span> ind=0;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = <a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afba7ecdd21e074f07f151ad5a4ed43dc">outputv_</a>.begin(); it != <a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afba7ecdd21e074f07f151ad5a4ed43dc">outputv_</a>.end(); ++it, ++ind) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordtype">int</span> nz=0;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> itc = (*it)-&gt;begin(); itc != (*it)-&gt;end(); ++itc, ++nz) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="comment">// Add outputs to the list</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        s.push(itc-&gt;get());</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#af4e73ad0f163fd02355960bd7ceb19ad">sort_depth_first</a>(s, nodes);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="comment">// A null pointer means an output instruction</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        nodes.push_back(static_cast&lt;SXNode*&gt;(0));</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">// Set the temporary variables to be the corresponding place in the sorted graph</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nodes.size(); ++i) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">if</span> (nodes[i]) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        nodes[i]-&gt;temp = i;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">// Sort the nodes by type</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a9acf5a3ecd44a150f41309b264c54b37">constants_</a>.clear();</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a09c314e70e5e04387fdb01cb9097ecaa">operations_</a>.clear();</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">for</span> (vector&lt;SXNode*&gt;::iterator it = nodes.begin(); it != nodes.end(); ++it) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html">SXNode</a>* t = *it;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordflow">if</span> (t) {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="keywordflow">if</span> (t-&gt;<a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html#af4dc0434270a7adc845617d1a2cfe16b">is_constant</a>())</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;          <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a9acf5a3ecd44a150f41309b264c54b37">constants_</a>.push_back(<a class="code" href="../../d0/d06/classcasadi_1_1SXElem.html#a6403099f0289077069b599d20a409e99">SXElem::create</a>(t));</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!t-&gt;<a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html#a4cf41880a6a9508731da0788066fb193">is_symbolic</a>())</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;          <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a09c314e70e5e04387fdb01cb9097ecaa">operations_</a>.push_back(<a class="code" href="../../d0/d06/classcasadi_1_1SXElem.html#a6403099f0289077069b599d20a409e99">SXElem::create</a>(t));</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="comment">// Input instructions</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    vector&lt;pair&lt;int, SXNode*&gt; &gt; symb_loc;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="comment">// Current output and nonzero, start with the first one</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordtype">int</span> curr_oind, curr_nz=0;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">for</span> (curr_oind=0; curr_oind&lt;<a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afba7ecdd21e074f07f151ad5a4ed43dc">outputv_</a>.size(); ++curr_oind) {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afba7ecdd21e074f07f151ad5a4ed43dc">outputv_</a>[curr_oind].nnz()!=0) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="comment">// Count the number of times each node is used</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    vector&lt;int&gt; refcount(nodes.size(), 0);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="comment">// Get the sequence of instructions for the virtual machine</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.resize(0);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.reserve(nodes.size());</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">for</span> (vector&lt;SXNode*&gt;::iterator it=nodes.begin(); it!=nodes.end(); ++it) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="comment">// Current node</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html">SXNode</a>* n = *it;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="comment">// New element in the algorithm</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <a class="code" href="../../de/d54/structcasadi_1_1ScalarAtomic.html">AlgEl</a> ae;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="comment">// Get operation</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      ae.<a class="code" href="../../de/d54/structcasadi_1_1ScalarAtomic.html#a5b5705a3602143a20dd1ac90a2490715">op</a> = n==0 ? <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a521a7c58943e1b877b6e73d79948cb68">OP_OUTPUT</a> : n-&gt;<a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html#a2c66c62d3acb5df84a1215a1abd5bb42">op</a>();</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="comment">// Get instruction</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="keywordflow">switch</span> (ae.<a class="code" href="../../de/d54/structcasadi_1_1ScalarAtomic.html#a5b5705a3602143a20dd1ac90a2490715">op</a>) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a69909c231708b235ccc215d93ca907f8">OP_CONST</a>: <span class="comment">// constant</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        ae.<a class="code" href="../../de/d54/structcasadi_1_1ScalarAtomic.html#a45d74bfcc3f9f89069a666bc1d205795">d</a> = n-&gt;<a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html#a86d7c648d7ac88f33ab57a52f9c32294">to_double</a>();</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        ae.<a class="code" href="../../de/d54/structcasadi_1_1ScalarAtomic.html#ae8b444afe94b02fe81b400c08e340e72">i0</a> = n-&gt;<a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html#a051381aa86d323cf501eb0d23bd2b6b2">temp</a>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618aae6785283527a2b4903fa3aa9f56d3d6">OP_PARAMETER</a>: <span class="comment">// a parameter or input</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        symb_loc.push_back(make_pair(<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.size(), n));</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        ae.<a class="code" href="../../de/d54/structcasadi_1_1ScalarAtomic.html#ae8b444afe94b02fe81b400c08e340e72">i0</a> = n-&gt;<a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html#a051381aa86d323cf501eb0d23bd2b6b2">temp</a>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a521a7c58943e1b877b6e73d79948cb68">OP_OUTPUT</a>: <span class="comment">// output instruction</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        ae.<a class="code" href="../../de/d54/structcasadi_1_1ScalarAtomic.html#ae8b444afe94b02fe81b400c08e340e72">i0</a> = curr_oind;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        ae.<a class="code" href="../../de/d54/structcasadi_1_1ScalarAtomic.html#a173be0614ad8b74808246cb341b2eea1">i1</a> = <a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afba7ecdd21e074f07f151ad5a4ed43dc">outputv_</a>[curr_oind]-&gt;at(curr_nz)-&gt;temp;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        ae.<a class="code" href="../../de/d54/structcasadi_1_1ScalarAtomic.html#af5b40aab3870a0c3f1f51ceb5db050a3">i2</a> = curr_nz;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="comment">// Go to the next nonzero</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        curr_nz++;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">if</span> (curr_nz&gt;=<a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afba7ecdd21e074f07f151ad5a4ed43dc">outputv_</a>[curr_oind].nnz()) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;          curr_nz=0;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;          curr_oind++;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;          <span class="keywordflow">for</span> (; curr_oind&lt;<a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afba7ecdd21e074f07f151ad5a4ed43dc">outputv_</a>.size(); ++curr_oind) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afba7ecdd21e074f07f151ad5a4ed43dc">outputv_</a>[curr_oind].nnz()!=0) {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;          }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="keywordflow">default</span>:       <span class="comment">// Unary or binary operation</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        ae.<a class="code" href="../../de/d54/structcasadi_1_1ScalarAtomic.html#ae8b444afe94b02fe81b400c08e340e72">i0</a> = n-&gt;<a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html#a051381aa86d323cf501eb0d23bd2b6b2">temp</a>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        ae.<a class="code" href="../../de/d54/structcasadi_1_1ScalarAtomic.html#a173be0614ad8b74808246cb341b2eea1">i1</a> = n-&gt;<a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html#aa10c4fce3b59be9f164645e91649e2f6">dep</a>(0).<a class="code" href="../../d0/d06/classcasadi_1_1SXElem.html#a7cc1d968105fb2e26c3c23e89302626b">get</a>()-&gt;<a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html#a051381aa86d323cf501eb0d23bd2b6b2">temp</a>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        ae.<a class="code" href="../../de/d54/structcasadi_1_1ScalarAtomic.html#af5b40aab3870a0c3f1f51ceb5db050a3">i2</a> = n-&gt;<a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html#aa10c4fce3b59be9f164645e91649e2f6">dep</a>(1).<a class="code" href="../../d0/d06/classcasadi_1_1SXElem.html#a7cc1d968105fb2e26c3c23e89302626b">get</a>()-&gt;<a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html#a051381aa86d323cf501eb0d23bd2b6b2">temp</a>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="comment">// Number of dependencies</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="keywordtype">int</span> ndeps = <a class="code" href="../../d2/d93/structcasadi_1_1casadi__math.html#aa55eca120fe70408b53fa684d77dbb36">casadi_math&lt;double&gt;::ndeps</a>(ae.<a class="code" href="../../de/d54/structcasadi_1_1ScalarAtomic.html#a5b5705a3602143a20dd1ac90a2490715">op</a>);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <span class="comment">// Increase count of dependencies</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c&lt;ndeps; ++c) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        refcount.at(c==0 ? ae.<a class="code" href="../../de/d54/structcasadi_1_1ScalarAtomic.html#a173be0614ad8b74808246cb341b2eea1">i1</a> : ae.<a class="code" href="../../de/d54/structcasadi_1_1ScalarAtomic.html#af5b40aab3870a0c3f1f51ceb5db050a3">i2</a>)++;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <span class="comment">// Add to algorithm</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.push_back(ae);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">// Place in the work vector for each of the nodes in the tree (overwrites the reference counter)</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    vector&lt;int&gt; place(nodes.size());</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="comment">// Stack with unused elements in the work vector</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    stack&lt;int&gt; unused;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">// Work vector size</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordtype">size_t</span> worksize = 0;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="comment">// Find a place in the work vector for the operation</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">for</span> (vector&lt;AlgEl&gt;::iterator it=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.begin(); it!=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.end(); ++it) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <span class="comment">// Number of dependencies</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="keywordtype">int</span> ndeps = <a class="code" href="../../d2/d93/structcasadi_1_1casadi__math.html#aa55eca120fe70408b53fa684d77dbb36">casadi_math&lt;double&gt;::ndeps</a>(it-&gt;op);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="comment">// decrease reference count of children</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="comment">// reverse order so that the first argument will end up at the top of the stack</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=ndeps-1; c&gt;=0; --c) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keywordtype">int</span> ch_ind = c==0 ? it-&gt;i1 : it-&gt;i2;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordtype">int</span> remaining = --refcount.at(ch_ind);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="keywordflow">if</span> (remaining==0) unused.push(place[ch_ind]);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="comment">// Find a place to store the variable</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordflow">if</span> (it-&gt;op!=<a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a521a7c58943e1b877b6e73d79948cb68">OP_OUTPUT</a>) {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">if</span> (live_variables &amp;&amp; !unused.empty()) {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;          <span class="comment">// Try to reuse a variable from the stack if possible (last in, first out)</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;          it-&gt;i0 = place[it-&gt;i0] = unused.top();</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;          unused.pop();</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;          <span class="comment">// Allocate a new variable</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;          it-&gt;i0 = place[it-&gt;i0] = worksize++;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <span class="comment">// Save the location of the children</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c&lt;ndeps; ++c) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">if</span> (c==0) {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;          it-&gt;i1 = place[it-&gt;i1];</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;          it-&gt;i2 = place[it-&gt;i2];</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="comment">// If binary, make sure that the second argument is the same as the first one</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="comment">// (in order to treat all operations as binary) NOTE: ugly</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <span class="keywordflow">if</span> (ndeps==1 &amp;&amp; it-&gt;op!=<a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a521a7c58943e1b877b6e73d79948cb68">OP_OUTPUT</a>) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        it-&gt;i2 = it-&gt;i1;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">verbose</a>()) {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      <span class="keywordflow">if</span> (live_variables) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;Using live variables: work array is &quot;</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;             &lt;&lt;  worksize &lt;&lt; <span class="stringliteral">&quot; instead of &quot;</span> &lt;&lt; nodes.size() &lt;&lt; endl;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;Live variables disabled.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">// Allocate work vectors (symbolic/numeric)</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#acd701154519bf9f8d787a936ef95246c">alloc_w</a>(worksize);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">s_work_</a>.resize(worksize);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">// Reset the temporary variables</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nodes.size(); ++i) {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="keywordflow">if</span> (nodes[i]) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        nodes[i]-&gt;temp = 0;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="comment">// Now mark each input&#39;s place in the algorithm</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it=symb_loc.begin(); it!=symb_loc.end(); ++it) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      it-&gt;second-&gt;temp = it-&gt;first+1;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="comment">// Add input instructions</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ind=0; ind&lt;<a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afadcdcae1e6a79c094eaaed70dc86530">inputv_</a>.size(); ++ind) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="keywordtype">int</span> nz=0;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> itc = <a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afadcdcae1e6a79c094eaaed70dc86530">inputv_</a>[ind]-&gt;begin(); itc != <a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afadcdcae1e6a79c094eaaed70dc86530">inputv_</a>[ind]-&gt;end(); ++itc, ++nz) {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordtype">int</span> i = itc-&gt;getTemp()-1;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">if</span> (i&gt;=0) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;          <span class="comment">// Mark as input</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;          <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>[i].op = <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a772d0d4a7fe8303114d42995378698d1">OP_INPUT</a>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;          <span class="comment">// Location of the input</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;          <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>[i].i1 = ind;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;          <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>[i].i2 = nz;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;          <span class="comment">// Mark input as read</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;          itc-&gt;setTemp(0);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    }</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">// Locate free variables</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ad83ba546e0240c2bc9586b0bf1e55e54">free_vars_</a>.clear();</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">for</span> (vector&lt;pair&lt;int, SXNode*&gt; &gt;::const_iterator it=symb_loc.begin();</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;         it!=symb_loc.end(); ++it) {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="keywordflow">if</span> (it-&gt;second-&gt;temp!=0) {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="comment">// Save to list of free parameters</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ad83ba546e0240c2bc9586b0bf1e55e54">free_vars_</a>.push_back(<a class="code" href="../../d0/d06/classcasadi_1_1SXElem.html#a6403099f0289077069b599d20a409e99">SXElem::create</a>(it-&gt;second));</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="comment">// Remove marker</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        it-&gt;second-&gt;temp=0;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="comment">// Initialize just-in-time compilation for numeric evaluation using OpenCL</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#aa4d5f13f07d9f54de814350d27b06b23">just_in_time_opencl_</a>) {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="preprocessor">#ifdef WITH_OPENCL</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      freeOpenCL();</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      allocOpenCL();</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="preprocessor">#else // WITH_OPENCL</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      casadi_error(<span class="stringliteral">&quot;Option \&quot;just_in_time_opencl\&quot; true requires CasADi &quot;</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                   <span class="stringliteral">&quot;to have been compiled with WITH_OPENCL=ON&quot;</span>);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="preprocessor">#endif // WITH_OPENCL</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="comment">// Initialize just-in-time compilation for sparsity propagation using OpenCL</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#aff3e0736235aa7db6e47284aee89e24d">just_in_time_sparsity_</a>) {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="preprocessor">#ifdef WITH_OPENCL</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      spFreeOpenCL();</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      spAllocOpenCL();</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="preprocessor">#else // WITH_OPENCL</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      casadi_error(<span class="stringliteral">&quot;Option \&quot;just_in_time_sparsity\&quot; true requires CasADi to &quot;</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                   <span class="stringliteral">&quot;have been compiled with WITH_OPENCL=ON&quot;</span>);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="preprocessor">#endif // WITH_OPENCL</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="comment">// Print</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">verbose</a>()) {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;SXFunction::init Initialized &quot;</span> &lt;&lt; <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a47fdf0f1c66ad9b45a24347cea290543">name_</a> &lt;&lt; <span class="stringliteral">&quot; (&quot;</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;           &lt;&lt; <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.size() &lt;&lt; <span class="stringliteral">&quot; elementary operations)&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    }</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#ac0e7fcf8b8dc94fd307f6d93013c5da2">  528</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ac0e7fcf8b8dc94fd307f6d93013c5da2">SXFunction::eval_sx</a>(<span class="keyword">const</span> <a class="code" href="../../d0/d06/classcasadi_1_1SXElem.html">SXElem</a>** arg, <a class="code" href="../../d0/d06/classcasadi_1_1SXElem.html">SXElem</a>** res, <span class="keywordtype">int</span>* iw, <a class="code" href="../../d0/d06/classcasadi_1_1SXElem.html">SXElem</a>* w, <span class="keywordtype">int</span> mem) {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">verbose</a>()) <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;SXFunction::eval_sxsparse begin&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="comment">// Iterator to the binary operations</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    vector&lt;SXElem&gt;::const_iterator b_it=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a09c314e70e5e04387fdb01cb9097ecaa">operations_</a>.begin();</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="comment">// Iterator to stack of constants</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    vector&lt;SXElem&gt;::const_iterator c_it = <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a9acf5a3ecd44a150f41309b264c54b37">constants_</a>.begin();</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="comment">// Iterator to free variables</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    vector&lt;SXElem&gt;::const_iterator p_it = <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ad83ba546e0240c2bc9586b0bf1e55e54">free_vars_</a>.begin();</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="comment">// Evaluate algorithm</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">verbose</a>()) {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;SXFunction::eval_sxsparse evaluating algorithm forward&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">for</span> (vector&lt;AlgEl&gt;::const_iterator it = <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.begin(); it!=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.end(); ++it) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="keywordflow">switch</span> (it-&gt;op) {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a772d0d4a7fe8303114d42995378698d1">OP_INPUT</a>:</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        w[it-&gt;i0] = arg[it-&gt;i1]==0 ? 0 : arg[it-&gt;i1][it-&gt;i2];</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a521a7c58943e1b877b6e73d79948cb68">OP_OUTPUT</a>:</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">if</span> (res[it-&gt;i0]!=0) res[it-&gt;i0][it-&gt;i2] = w[it-&gt;i1];</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a69909c231708b235ccc215d93ca907f8">OP_CONST</a>:</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        w[it-&gt;i0] = *c_it++;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618aae6785283527a2b4903fa3aa9f56d3d6">OP_PARAMETER</a>:</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        w[it-&gt;i0] = *p_it++; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;          <span class="comment">// Evaluate the function to a temporary value</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;          <span class="comment">// (as it might overwrite the children in the work vector)</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;          <a class="code" href="../../d0/d06/classcasadi_1_1SXElem.html">SXElem</a> f;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;          <span class="keywordflow">switch</span> (it-&gt;op) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            CASADI_MATH_FUN_BUILTIN(w[it-&gt;i1], w[it-&gt;i2], f)</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;          }</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;          <span class="comment">// If this new expression is identical to the expression used</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;          <span class="comment">// to define the algorithm, then reuse</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">int</span> depth = 2; <span class="comment">// NOTE: a higher depth could possibly give more savings</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;          f.<a class="code" href="../../d0/d06/classcasadi_1_1SXElem.html#ac35f5ea925d55bbc39b0858174ec36a3">assignIfDuplicate</a>(*b_it++, depth);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;          <span class="comment">// Finally save the function value</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;          w[it-&gt;i0] = f;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      }</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    }</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">verbose</a>()) <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;SXFunction::eval_sx end&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#aaea9ce421226535575e3cd17a733caa1">  579</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#aaea9ce421226535575e3cd17a733caa1">SXFunction::evalFwd</a>(<span class="keyword">const</span> vector&lt;vector&lt;SX&gt; &gt;&amp; fseed, vector&lt;vector&lt;SX&gt; &gt;&amp; fsens) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">verbose</a>()) <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;SXFunction::evalFwd begin&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="comment">// Number of forward seeds</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordtype">int</span> nfwd = fseed.size();</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    fsens.resize(nfwd);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="comment">// Quick return if possible</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">if</span> (nfwd==0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="comment">// Get the number of inputs and outputs</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordtype">int</span> num_in = <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a85e89a48263b1f8c6902a029f39d5ebe">n_in</a>();</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordtype">int</span> num_out = <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#abda391e5e8300917c6a2c9a0d3fbca42">n_out</a>();</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="comment">// Make sure matching sparsity of fseed</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordtype">bool</span> matching_sparsity = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d=0; d&lt;nfwd; ++d) {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      casadi_assert(fseed[d].size()==num_in);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; matching_sparsity &amp;&amp; i&lt;num_in; ++i)</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        matching_sparsity = fseed[d][i].sparsity()==<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a8655fdaf9d763dec3c5aeba20ef18c9b">sparsity_in</a>(i);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    }</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="comment">// Correct sparsity if needed</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">if</span> (!matching_sparsity) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      vector&lt;vector&lt;SX&gt; &gt; fseed2(fseed);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d=0; d&lt;nfwd; ++d)</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;num_in; ++i)</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;          <span class="keywordflow">if</span> (fseed2[d][i].sparsity()!=<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a8655fdaf9d763dec3c5aeba20ef18c9b">sparsity_in</a>(i))</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            fseed2[d][i] = <a class="code" href="../../d7/d23/namespacecasadi.html#a217d5abb0932b6c65a8f966dbf101cdc">project</a>(fseed2[d][i], <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a8655fdaf9d763dec3c5aeba20ef18c9b">sparsity_in</a>(i));</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#aaea9ce421226535575e3cd17a733caa1">evalFwd</a>(fseed2, fsens);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="comment">// Allocate results</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d=0; d&lt;nfwd; ++d) {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      fsens[d].resize(num_out);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;fsens[d].size(); ++i)</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordflow">if</span> (fsens[d][i].sparsity()!=<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#aff5fde032442f1708b74357109d73287">sparsity_out</a>(i))</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;          fsens[d][i] = <a class="code" href="../../dc/df3/classcasadi_1_1GenericMatrix.html#a8474a2a70e32d853e3b7b71f024c3c27">SX::zeros</a>(<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#aff5fde032442f1708b74357109d73287">sparsity_out</a>(i));</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="comment">// Iterator to the binary operations</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    vector&lt;SXElem&gt;::const_iterator b_it=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a09c314e70e5e04387fdb01cb9097ecaa">operations_</a>.begin();</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="comment">// Tape</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    vector&lt;TapeEl&lt;SXElem&gt; &gt; s_pdwork(<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a09c314e70e5e04387fdb01cb9097ecaa">operations_</a>.size());</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    vector&lt;TapeEl&lt;SXElem&gt; &gt;::iterator it1 = s_pdwork.begin();</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="comment">// Evaluate algorithm</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">verbose</a>()) <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;SXFunction::evalFwd evaluating algorithm forward&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">for</span> (vector&lt;AlgEl&gt;::const_iterator it = <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.begin(); it!=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.end(); ++it) {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <span class="keywordflow">switch</span> (it-&gt;op) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a772d0d4a7fe8303114d42995378698d1">OP_INPUT</a>:</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a521a7c58943e1b877b6e73d79948cb68">OP_OUTPUT</a>:</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a69909c231708b235ccc215d93ca907f8">OP_CONST</a>:</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618aae6785283527a2b4903fa3aa9f56d3d6">OP_PARAMETER</a>:</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d0/d06/classcasadi_1_1SXElem.html">SXElem</a>&amp; f=*b_it++;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;          <span class="keywordflow">switch</span> (it-&gt;op) {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            CASADI_MATH_DER_BUILTIN(f-&gt;<a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html#aa10c4fce3b59be9f164645e91649e2f6">dep</a>(0), f-&gt;<a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html#aa10c4fce3b59be9f164645e91649e2f6">dep</a>(1), f, it1++-&gt;d)</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;          }</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="comment">// Calculate forward sensitivities</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">verbose</a>())</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;SXFunction::evalFwd calculating forward derivatives&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> dir=0; dir&lt;nfwd; ++dir) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      vector&lt;TapeEl&lt;SXElem&gt; &gt;::const_iterator it2 = s_pdwork.begin();</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <span class="keywordflow">for</span> (vector&lt;AlgEl&gt;::const_iterator it = <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.begin(); it!=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.end(); ++it) {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="keywordflow">switch</span> (it-&gt;op) {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a772d0d4a7fe8303114d42995378698d1">OP_INPUT</a>:</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;          <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">s_work_</a>[it-&gt;i0] = fseed[dir][it-&gt;i1].nonzeros()[it-&gt;i2]; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a521a7c58943e1b877b6e73d79948cb68">OP_OUTPUT</a>:</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;          fsens[dir][it-&gt;i0].nonzeros()[it-&gt;i2] = <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">s_work_</a>[it-&gt;i1]; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a69909c231708b235ccc215d93ca907f8">OP_CONST</a>:</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618aae6785283527a2b4903fa3aa9f56d3d6">OP_PARAMETER</a>:</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;          <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">s_work_</a>[it-&gt;i0] = 0;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;          CASADI_MATH_BINARY_BUILTIN <span class="comment">// Binary operation</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">s_work_</a>[it-&gt;i0] = it2-&gt;d[0] * s_work_[it-&gt;i1] + it2-&gt;d[1] * s_work_[it-&gt;i2];it2++;<span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <span class="keywordflow">default</span>: <span class="comment">// Unary operation</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;          s_work_[it-&gt;i0] = it2-&gt;d[0] * s_work_[it-&gt;i1]; it2++;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">verbose</a>()) <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;SXFunction::evalFwd end&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div>
<div class="line"><a name="l00670"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#af8f4be7cb60c0f7712d0de12105e8f81">  670</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#af8f4be7cb60c0f7712d0de12105e8f81">SXFunction::evalAdj</a>(<span class="keyword">const</span> vector&lt;vector&lt;SX&gt; &gt;&amp; aseed, vector&lt;vector&lt;SX&gt; &gt;&amp; asens) {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">verbose</a>()) <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;SXFunction::evalAdj begin&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="comment">// number of adjoint seeds</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordtype">int</span> nadj = aseed.size();</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    asens.resize(nadj);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="comment">// Quick return if possible</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">if</span> (nadj==0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="comment">// Get the number of inputs and outputs</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordtype">int</span> num_in = <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a85e89a48263b1f8c6902a029f39d5ebe">n_in</a>();</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordtype">int</span> num_out = <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#abda391e5e8300917c6a2c9a0d3fbca42">n_out</a>();</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="comment">// Make sure matching sparsity of fseed</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordtype">bool</span> matching_sparsity = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d=0; d&lt;nadj; ++d) {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      casadi_assert(aseed[d].size()==num_out);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; matching_sparsity &amp;&amp; i&lt;num_out; ++i)</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        matching_sparsity = aseed[d][i].sparsity()==<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#aff5fde032442f1708b74357109d73287">sparsity_out</a>(i);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="comment">// Correct sparsity if needed</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">if</span> (!matching_sparsity) {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      vector&lt;vector&lt;SX&gt; &gt; aseed2(aseed);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d=0; d&lt;nadj; ++d)</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;num_out; ++i)</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;          <span class="keywordflow">if</span> (aseed2[d][i].sparsity()!=<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#aff5fde032442f1708b74357109d73287">sparsity_out</a>(i))</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            aseed2[d][i] = <a class="code" href="../../d7/d23/namespacecasadi.html#a217d5abb0932b6c65a8f966dbf101cdc">project</a>(aseed2[d][i], <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#aff5fde032442f1708b74357109d73287">sparsity_out</a>(i));</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#af8f4be7cb60c0f7712d0de12105e8f81">evalAdj</a>(aseed2, asens);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    }</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="comment">// Allocate results if needed</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d=0; d&lt;nadj; ++d) {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      asens[d].resize(num_in);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;asens[d].size(); ++i) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="keywordflow">if</span> (asens[d][i].sparsity()!=<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a8655fdaf9d763dec3c5aeba20ef18c9b">sparsity_in</a>(i)) {</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;          asens[d][i] = <a class="code" href="../../dc/df3/classcasadi_1_1GenericMatrix.html#a8474a2a70e32d853e3b7b71f024c3c27">SX::zeros</a>(<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a8655fdaf9d763dec3c5aeba20ef18c9b">sparsity_in</a>(i));</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;          <a class="code" href="../../d7/d23/namespacecasadi.html#add9e57eb6393010728e86325c95af1e8">fill</a>(asens[d][i]-&gt;begin(), asens[d][i]-&gt;end(), 0);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        }</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="comment">// Iterator to the binary operations</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    vector&lt;SXElem&gt;::const_iterator b_it=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a09c314e70e5e04387fdb01cb9097ecaa">operations_</a>.begin();</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="comment">// Tape</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    vector&lt;TapeEl&lt;SXElem&gt; &gt; s_pdwork(<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a09c314e70e5e04387fdb01cb9097ecaa">operations_</a>.size());</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    vector&lt;TapeEl&lt;SXElem&gt; &gt;::iterator it1 = s_pdwork.begin();</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="comment">// Evaluate algorithm</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">verbose</a>()) <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;SXFunction::evalFwd evaluating algorithm forward&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">for</span> (vector&lt;AlgEl&gt;::const_iterator it = <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.begin(); it!=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.end(); ++it) {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      <span class="keywordflow">switch</span> (it-&gt;op) {</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a772d0d4a7fe8303114d42995378698d1">OP_INPUT</a>:</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a521a7c58943e1b877b6e73d79948cb68">OP_OUTPUT</a>:</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a69909c231708b235ccc215d93ca907f8">OP_CONST</a>:</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618aae6785283527a2b4903fa3aa9f56d3d6">OP_PARAMETER</a>:</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d0/d06/classcasadi_1_1SXElem.html">SXElem</a>&amp; f=*b_it++;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;          <span class="keywordflow">switch</span> (it-&gt;op) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            CASADI_MATH_DER_BUILTIN(f-&gt;<a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html#aa10c4fce3b59be9f164645e91649e2f6">dep</a>(0), f-&gt;<a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html#aa10c4fce3b59be9f164645e91649e2f6">dep</a>(1), f, it1++-&gt;d)</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;          }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      }</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    }</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="comment">// Calculate adjoint sensitivities</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">verbose</a>()) <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;SXFunction::evalAdj calculating adjoint derivatives&quot;</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                       &lt;&lt; endl;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <a class="code" href="../../d7/d23/namespacecasadi.html#add9e57eb6393010728e86325c95af1e8">fill</a>(<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">s_work_</a>.begin(), <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">s_work_</a>.end(), 0);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> dir=0; dir&lt;nadj; ++dir) {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      vector&lt;TapeEl&lt;SXElem&gt; &gt;::const_reverse_iterator it2 = s_pdwork.rbegin();</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      <span class="keywordflow">for</span> (vector&lt;AlgEl&gt;::const_reverse_iterator it = <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.rbegin();</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;           it!=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.rend(); ++it) {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        <a class="code" href="../../d0/d06/classcasadi_1_1SXElem.html">SXElem</a> seed;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="keywordflow">switch</span> (it-&gt;op) {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a772d0d4a7fe8303114d42995378698d1">OP_INPUT</a>:</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;          asens[dir][it-&gt;i1].nonzeros()[it-&gt;i2] = <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">s_work_</a>[it-&gt;i0];</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;          <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">s_work_</a>[it-&gt;i0] = 0;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a521a7c58943e1b877b6e73d79948cb68">OP_OUTPUT</a>:</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;          <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">s_work_</a>[it-&gt;i1] += aseed[dir][it-&gt;i0].nonzeros()[it-&gt;i2];</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a69909c231708b235ccc215d93ca907f8">OP_CONST</a>:</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618aae6785283527a2b4903fa3aa9f56d3d6">OP_PARAMETER</a>:</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;          <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">s_work_</a>[it-&gt;i0] = 0;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;          CASADI_MATH_BINARY_BUILTIN <span class="comment">// Binary operation</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            seed = <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">s_work_</a>[it-&gt;i0];</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;          <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">s_work_</a>[it-&gt;i0] = 0;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;          <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">s_work_</a>[it-&gt;i1] += it2-&gt;d[0] * seed;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;          <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">s_work_</a>[it-&gt;i2] += it2-&gt;d[1] * seed;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;          it2++;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="keywordflow">default</span>: <span class="comment">// Unary operation</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;          seed = <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">s_work_</a>[it-&gt;i0];</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;          <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">s_work_</a>[it-&gt;i0] = 0;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;          <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">s_work_</a>[it-&gt;i1] += it2-&gt;d[0] * seed;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;          it2++;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      }</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    }</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">verbose</a>()) <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;SXFunction::evalAdj end&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  }</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div>
<div class="line"><a name="l00779"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#a50cec56e4ad15efbad268a24243d22ad">  779</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a50cec56e4ad15efbad268a24243d22ad">SXFunction::spFwd</a>(<span class="keyword">const</span> <a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a>** arg, <a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a>** res, <span class="keywordtype">int</span>* iw, <a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a>* w, <span class="keywordtype">int</span> mem) {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="comment">// Propagate sparsity forward</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">for</span> (vector&lt;AlgEl&gt;::iterator it=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.begin(); it!=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.end(); ++it) {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <span class="keywordflow">switch</span> (it-&gt;op) {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a69909c231708b235ccc215d93ca907f8">OP_CONST</a>:</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618aae6785283527a2b4903fa3aa9f56d3d6">OP_PARAMETER</a>:</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        w[it-&gt;i0] = 0; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a772d0d4a7fe8303114d42995378698d1">OP_INPUT</a>:</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        w[it-&gt;i0] = arg[it-&gt;i1]==0 ? 0 : arg[it-&gt;i1][it-&gt;i2]; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a521a7c58943e1b877b6e73d79948cb68">OP_OUTPUT</a>:</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        <span class="keywordflow">if</span> (res[it-&gt;i0]!=0) res[it-&gt;i0][it-&gt;i2] = w[it-&gt;i1]; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      <span class="keywordflow">default</span>: <span class="comment">// Unary or binary operation</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        w[it-&gt;i0] = w[it-&gt;i1] | w[it-&gt;i2]; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div>
<div class="line"><a name="l00796"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#a05d77ced432bde2a4b0b858725e84aee">  796</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a05d77ced432bde2a4b0b858725e84aee">SXFunction::spAdj</a>(<a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a>** arg, <a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a>** res, <span class="keywordtype">int</span>* iw, <a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a>* w, <span class="keywordtype">int</span> mem) {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    fill_n(w, <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a3a1e4edbb5b0d906e280b3ffb4d9068e">sz_w</a>(), 0);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="comment">// Propagate sparsity backward</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keywordflow">for</span> (vector&lt;AlgEl&gt;::reverse_iterator it=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.rbegin(); it!=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.rend(); ++it) {</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <span class="comment">// Temp seed</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a> seed;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <span class="comment">// Propagate seeds</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <span class="keywordflow">switch</span> (it-&gt;op) {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a69909c231708b235ccc215d93ca907f8">OP_CONST</a>:</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618aae6785283527a2b4903fa3aa9f56d3d6">OP_PARAMETER</a>:</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        w[it-&gt;i0] = 0;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a772d0d4a7fe8303114d42995378698d1">OP_INPUT</a>:</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="keywordflow">if</span> (arg[it-&gt;i1]!=0) arg[it-&gt;i1][it-&gt;i2] |= w[it-&gt;i0];</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        w[it-&gt;i0] = 0;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a521a7c58943e1b877b6e73d79948cb68">OP_OUTPUT</a>:</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="keywordflow">if</span> (res[it-&gt;i0]!=0) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;          w[it-&gt;i1] |= res[it-&gt;i0][it-&gt;i2];</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;          res[it-&gt;i0][it-&gt;i2] = 0;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <span class="keywordflow">default</span>: <span class="comment">// Unary or binary operation</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        seed = w[it-&gt;i0];</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        w[it-&gt;i0] = 0;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        w[it-&gt;i1] |= seed;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        w[it-&gt;i2] |= seed;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    }</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  }</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div>
<div class="line"><a name="l00829"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#aef01fe9eb26f389b4df8762b9b34efb7">  829</a></span>&#160;  <a class="code" href="../../da/da4/classcasadi_1_1Function.html">Function</a> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#aef01fe9eb26f389b4df8762b9b34efb7">SXFunction::getFullJacobian</a>() {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <a class="code" href="../../dd/df2/singletoncasadi_1_1Matrix.html">SX</a> J = <a class="code" href="../../dd/df2/singletoncasadi_1_1Matrix.html#af124a732d7f7b8a9c797683d292b139e">SX::jacobian</a>(veccat(<a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afba7ecdd21e074f07f151ad5a4ed43dc">outputv_</a>), veccat(<a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afadcdcae1e6a79c094eaaed70dc86530">inputv_</a>));</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../da/da4/classcasadi_1_1Function.html">Function</a>(<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a47fdf0f1c66ad9b45a24347cea290543">name_</a> + <span class="stringliteral">&quot;_jac&quot;</span>, <a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afadcdcae1e6a79c094eaaed70dc86530">inputv_</a>, {J});</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  }</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="preprocessor">#ifdef WITH_OPENCL</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  SparsityPropagationKernel::SparsityPropagationKernel() {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    device_id = 0;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    context = 0;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    command_queue = 0;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    platform_id = 0;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    cl_int ret;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="comment">// Get Platform and Device Info</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    ret = clGetPlatformIDs(1, &amp;platform_id, &amp;ret_num_platforms);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    ret = clGetDeviceIDs(platform_id, CL_DEVICE_TYPE_DEFAULT, 1, &amp;device_id, &amp;ret_num_devices);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="comment">// Create OpenCL context</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    context = clCreateContext(NULL, 1, &amp;device_id, NULL, NULL, &amp;ret);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="comment">// Create Command Queue</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    command_queue = clCreateCommandQueue(context, device_id, 0, &amp;ret);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  }</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  SparsityPropagationKernel::~SparsityPropagationKernel() {</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="comment">// Clean up</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    cl_int ret;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    ret = clFlush(command_queue);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    ret = clFinish(command_queue);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    ret = clReleaseCommandQueue(command_queue);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    ret = clReleaseContext(context);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="comment">// Memory for the kernel singleton</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  SparsityPropagationKernel SXFunction::sparsity_propagation_kernel_;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="keywordtype">void</span> SXFunction::spAllocOpenCL() {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="comment">// OpenCL return flag</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    cl_int ret;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="comment">// Generate the kernel source code</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    stringstream ss;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* fcn_name[2] = {<span class="stringliteral">&quot;sp_evaluate_fwd&quot;</span>, <span class="stringliteral">&quot;sp_evaluate_adj&quot;</span>};</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> kernel=0; kernel&lt;2; ++kernel) {</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <span class="keywordtype">bool</span> use_fwd = kernel==0;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      ss &lt;&lt; <span class="stringliteral">&quot;__kernel void &quot;</span> &lt;&lt; fcn_name[kernel] &lt;&lt; <span class="stringliteral">&quot;(&quot;</span>;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <span class="keywordtype">bool</span> first=<span class="keyword">true</span>;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a85e89a48263b1f8c6902a029f39d5ebe">n_in</a>(); ++i) {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <span class="keywordflow">if</span> (first) first=<span class="keyword">false</span>;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="keywordflow">else</span>      ss &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        ss &lt;&lt; <span class="stringliteral">&quot;__global unsigned long *x&quot;</span> &lt;&lt; i;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      }</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#abda391e5e8300917c6a2c9a0d3fbca42">n_out</a>(); ++i) {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <span class="keywordflow">if</span> (first) first=<span class="keyword">false</span>;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <span class="keywordflow">else</span>      ss &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        ss &lt;&lt; <span class="stringliteral">&quot;__global unsigned long *r&quot;</span> &lt;&lt; i;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      }</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      ss &lt;&lt; <span class="stringliteral">&quot;) { &quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      <span class="keywordflow">if</span> (use_fwd) {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        <span class="comment">// Which variables have been declared</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        vector&lt;bool&gt; declared(n_w_, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="comment">// Propagate sparsity forward</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="keywordflow">for</span> (vector&lt;AlgEl&gt;::iterator it=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.begin(); it!=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.end(); ++it) {</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;          <span class="keywordflow">if</span> (it-&gt;op==<a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a521a7c58943e1b877b6e73d79948cb68">OP_OUTPUT</a>) {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            ss &lt;&lt; <span class="stringliteral">&quot;if (r&quot;</span> &lt;&lt; it-&gt;i0 &lt;&lt; <span class="stringliteral">&quot;!=0) r&quot;</span> &lt;&lt; it-&gt;i0 &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; it-&gt;i2 &lt;&lt; <span class="stringliteral">&quot;]=&quot;</span> &lt;&lt; <span class="stringliteral">&quot;a&quot;</span> &lt;&lt; it-&gt;i1;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            <span class="comment">// Declare result if not already declared</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            <span class="keywordflow">if</span> (!declared[it-&gt;i0]) {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;              ss &lt;&lt; <span class="stringliteral">&quot;ulong &quot;</span>;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;              declared[it-&gt;i0]=<span class="keyword">true</span>;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;            }</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            <span class="comment">// Where to store the result</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            ss &lt;&lt; <span class="stringliteral">&quot;a&quot;</span> &lt;&lt; it-&gt;i0 &lt;&lt; <span class="stringliteral">&quot;=&quot;</span>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            <span class="comment">// What to store</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            <span class="keywordflow">if</span> (it-&gt;op==<a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a69909c231708b235ccc215d93ca907f8">OP_CONST</a> || it-&gt;op==<a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618aae6785283527a2b4903fa3aa9f56d3d6">OP_PARAMETER</a>) {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;              ss &lt;&lt; <span class="stringliteral">&quot;0&quot;</span>;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (it-&gt;op==<a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a772d0d4a7fe8303114d42995378698d1">OP_INPUT</a>) {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;              ss &lt;&lt; <span class="stringliteral">&quot;x&quot;</span> &lt;&lt; it-&gt;i1 &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; it-&gt;i2 &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;              <span class="keywordtype">int</span> ndep = <a class="code" href="../../d2/d93/structcasadi_1_1casadi__math.html#aa55eca120fe70408b53fa684d77dbb36">casadi_math&lt;double&gt;::ndeps</a>(it-&gt;op);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;              <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c&lt;ndep; ++c) {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                <span class="keywordflow">if</span> (c==0) {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                  ss &lt;&lt; <span class="stringliteral">&quot;a&quot;</span> &lt;&lt; it-&gt;i1;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                  ss &lt;&lt; <span class="stringliteral">&quot;|&quot;</span>;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                  ss &lt;&lt; <span class="stringliteral">&quot;a&quot;</span> &lt;&lt; it-&gt;i2;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                }</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;              }</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            }</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;          }</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;          ss  &lt;&lt; <span class="stringliteral">&quot;;&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        }</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      } <span class="keywordflow">else</span> { <span class="comment">// Backward propagation</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <span class="comment">// Temporary variable</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        ss &lt;&lt; <span class="stringliteral">&quot;ulong t;&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <span class="comment">// Declare and initialize work vector</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;n_w_; ++i) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;          ss &lt;&lt; <span class="stringliteral">&quot;ulong a&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;=0;&quot;</span>&lt;&lt; endl;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        }</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <span class="comment">// Propagate sparsity backward</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        <span class="keywordflow">for</span> (vector&lt;AlgEl&gt;::reverse_iterator it=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.rbegin(); it!=<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">algorithm_</a>.rend(); ++it) {</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;          <span class="keywordflow">if</span> (it-&gt;op==<a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a521a7c58943e1b877b6e73d79948cb68">OP_OUTPUT</a>) {</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            ss &lt;&lt; <span class="stringliteral">&quot;if (r&quot;</span> &lt;&lt; it-&gt;i0 &lt;&lt; <span class="stringliteral">&quot;!=0) a&quot;</span> &lt;&lt; it-&gt;i1</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;|=r&quot;</span> &lt;&lt; it-&gt;i0 &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; it-&gt;i2 &lt;&lt; <span class="stringliteral">&quot;];&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;            <span class="keywordflow">if</span> (it-&gt;op==<a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a772d0d4a7fe8303114d42995378698d1">OP_INPUT</a>) {</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;              ss &lt;&lt; <span class="stringliteral">&quot;x&quot;</span> &lt;&lt; it-&gt;i1 &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; it-&gt;i2 &lt;&lt; <span class="stringliteral">&quot;]=a&quot;</span> &lt;&lt; it-&gt;i0 &lt;&lt; <span class="stringliteral">&quot;; &quot;</span>;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;              ss &lt;&lt; <span class="stringliteral">&quot;a&quot;</span> &lt;&lt; it-&gt;i0 &lt;&lt; <span class="stringliteral">&quot;=0;&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (it-&gt;op==<a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a69909c231708b235ccc215d93ca907f8">OP_CONST</a> || it-&gt;op==<a class="code" href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618aae6785283527a2b4903fa3aa9f56d3d6">OP_PARAMETER</a>) {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;              ss &lt;&lt; <span class="stringliteral">&quot;a&quot;</span> &lt;&lt; it-&gt;i0 &lt;&lt; <span class="stringliteral">&quot;=0;&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;              <span class="keywordtype">int</span> ndep = <a class="code" href="../../d2/d93/structcasadi_1_1casadi__math.html#aa55eca120fe70408b53fa684d77dbb36">casadi_math&lt;double&gt;::ndeps</a>(it-&gt;op);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;              ss &lt;&lt; <span class="stringliteral">&quot;t=a&quot;</span> &lt;&lt; it-&gt;i0 &lt;&lt; <span class="stringliteral">&quot;; &quot;</span>;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;              ss &lt;&lt; <span class="stringliteral">&quot;a&quot;</span> &lt;&lt; it-&gt;i0 &lt;&lt; <span class="stringliteral">&quot;=0; &quot;</span>;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;              ss &lt;&lt; <span class="stringliteral">&quot;a&quot;</span> &lt;&lt; it-&gt;i1 &lt;&lt; <span class="stringliteral">&quot;|=&quot;</span> &lt;&lt; <span class="stringliteral">&quot;t&quot;</span> &lt;&lt; <span class="stringliteral">&quot;; &quot;</span>;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;              <span class="keywordflow">if</span> (ndep&gt;1) {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                ss &lt;&lt; <span class="stringliteral">&quot;a&quot;</span> &lt;&lt; it-&gt;i2 &lt;&lt; <span class="stringliteral">&quot;|=&quot;</span> &lt;&lt; <span class="stringliteral">&quot;t&quot;</span> &lt;&lt; <span class="stringliteral">&quot;; &quot;</span>;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;              }</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;              ss &lt;&lt; endl;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            }</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;          }</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        }</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      }</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      ss &lt;&lt; <span class="stringliteral">&quot;}&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    }</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="comment">// Form c-string</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    std::string s = ss.str();</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">verbose</a>()) {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;Kernel source code for sparsity propagation:&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot; ***** &quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; s;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot; ***** &quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    }</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* cstr = s.c_str();</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="comment">// Parse kernel source code</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    sp_program_ = clCreateProgramWithSource(sparsity_propagation_kernel_.context,</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                                            1, static_cast&lt;const char **&gt;(&amp;cstr), 0, &amp;ret);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    casadi_assert(sp_program_ != 0);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="comment">// Build Kernel Program</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    compileProgram(sp_program_);</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="comment">// Create OpenCL kernel for forward propatation</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    sp_fwd_kernel_ = clCreateKernel(sp_program_, fcn_name[0], &amp;ret);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="comment">// Create OpenCL kernel for backward propatation</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    sp_adj_kernel_ = clCreateKernel(sp_program_, fcn_name[1], &amp;ret);</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="comment">// Memory buffer for each of the input arrays</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    sp_input_memobj_.resize(<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a85e89a48263b1f8c6902a029f39d5ebe">n_in</a>(), static_cast&lt;cl_mem&gt;(0));</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;sp_input_memobj_.size(); ++i) {</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      sp_input_memobj_[i] = clCreateBuffer(sparsity_propagation_kernel_.context,</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                                           CL_MEM_READ_WRITE | CL_MEM_USE_HOST_PTR,</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                                           inputNoCheck(i).size() * <span class="keyword">sizeof</span>(cl_ulong),</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                                           reinterpret_cast&lt;void*&gt;(inputNoCheck(i).ptr()), &amp;ret);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    }</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="comment">// Memory buffer for each of the output arrays</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    sp_output_memobj_.resize(<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#abda391e5e8300917c6a2c9a0d3fbca42">n_out</a>(), static_cast&lt;cl_mem&gt;(0));</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;sp_output_memobj_.size(); ++i) {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      sp_output_memobj_[i] = clCreateBuffer(sparsity_propagation_kernel_.context,</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                                            CL_MEM_READ_WRITE | CL_MEM_USE_HOST_PTR,</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                                            outputNoCheck(i).size() * <span class="keyword">sizeof</span>(cl_ulong),</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                                            reinterpret_cast&lt;void*&gt;(outputNoCheck(i).ptr()), &amp;ret);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  }</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="keywordtype">void</span> SXFunction::spEvaluateOpenCL(<span class="keywordtype">bool</span> fwd) {</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="comment">// OpenCL return flag</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    cl_int ret;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="comment">// Select a kernel</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    cl_kernel kernel = fwd ? sp_fwd_kernel_ : sp_adj_kernel_;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="comment">// Set OpenCL Kernel Parameters</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordtype">int</span> kernel_arg = 0;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <span class="comment">// Pass inputs</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a85e89a48263b1f8c6902a029f39d5ebe">n_in</a>(); ++i) {</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      ret = clSetKernelArg(kernel, kernel_arg++,</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                           <span class="keyword">sizeof</span>(cl_mem), static_cast&lt;void *&gt;(&amp;sp_input_memobj_[i]));</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <span class="comment">// Pass outputs</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#abda391e5e8300917c6a2c9a0d3fbca42">n_out</a>(); ++i) {</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      ret = clSetKernelArg(kernel, kernel_arg++,</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                           <span class="keyword">sizeof</span>(cl_mem), static_cast&lt;void *&gt;(&amp;sp_output_memobj_[i]));</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    }</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="comment">// Execute OpenCL Kernel</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    executeKernel(kernel);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="comment">// Get inputs</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;sp_input_memobj_.size(); ++i) {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      ret = clEnqueueReadBuffer(sparsity_propagation_kernel_.command_queue,</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                                sp_input_memobj_[i], CL_TRUE, 0,</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                                inputNoCheck(i).size() * <span class="keyword">sizeof</span>(cl_ulong),</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                                reinterpret_cast&lt;void*&gt;(inputNoCheck(i).ptr()), 0, NULL, NULL);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    }</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="comment">// Get outputs</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;sp_output_memobj_.size(); ++i) {</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      ret = clEnqueueReadBuffer(sparsity_propagation_kernel_.command_queue,</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                                sp_output_memobj_[i], CL_TRUE, 0,</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                                outputNoCheck(i).size() * <span class="keyword">sizeof</span>(cl_ulong),</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                                reinterpret_cast&lt;void*&gt;(outputNoCheck(i).ptr()), 0, NULL, NULL);</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    }</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  }</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="keywordtype">void</span> SXFunction::spFreeOpenCL() {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="comment">// OpenCL return flag</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    cl_int ret;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="comment">// Clean up memory for input buffers</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordflow">for</span> (vector&lt;cl_mem&gt;::iterator i=sp_input_memobj_.begin(); i!=sp_input_memobj_.end(); ++i) {</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      <span class="keywordflow">if</span> (*i != 0) {</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        ret = clReleaseMemObject(*i);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        casadi_assert_warning(ret == CL_SUCCESS, <span class="stringliteral">&quot;Freeing OpenCL memory failed&quot;</span>);</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      }</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    }</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    sp_input_memobj_.clear();</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="comment">// Clean up memory for output buffers</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordflow">for</span> (vector&lt;cl_mem&gt;::iterator i=sp_output_memobj_.begin(); i!=sp_output_memobj_.end(); ++i) {</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      <span class="keywordflow">if</span> (*i != 0) {</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        ret = clReleaseMemObject(*i);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        casadi_assert_warning(ret == CL_SUCCESS, <span class="stringliteral">&quot;Freeing OpenCL memory failed&quot;</span>);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      }</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    }</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    sp_output_memobj_.clear();</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="comment">// Free opencl forward propagation kernel</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="keywordflow">if</span> (sp_fwd_kernel_!=0) {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      ret = clReleaseKernel(sp_fwd_kernel_);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      casadi_assert_warning(ret == CL_SUCCESS, <span class="stringliteral">&quot;Freeing OpenCL memory failed&quot;</span>);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      sp_fwd_kernel_ = 0;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    }</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="comment">// Free opencl backward propagation kernel</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keywordflow">if</span> (sp_adj_kernel_!=0) {</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      ret = clReleaseKernel(sp_adj_kernel_);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      casadi_assert_warning(ret == CL_SUCCESS, <span class="stringliteral">&quot;Freeing OpenCL memory failed&quot;</span>);</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      sp_adj_kernel_ = 0;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    }</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="comment">// Free opencl program</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="keywordflow">if</span> (sp_program_!=0) {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      ret = clReleaseProgram(sp_program_);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      casadi_assert_warning(ret == CL_SUCCESS, <span class="stringliteral">&quot;Freeing OpenCL memory failed&quot;</span>);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      sp_program_ = 0;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  }</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <span class="keywordtype">void</span> SXFunction::allocOpenCL() {</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="comment">// OpenCL return flag</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    cl_int ret;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="comment">// Generate the kernel source code</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    stringstream ss;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="comment">// Add kernel prefix</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    ss &lt;&lt; <span class="stringliteral">&quot;__kernel &quot;</span>;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="comment">// Generate the function</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    CodeGenerator gen;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a668a2e7fcd58648e8d5aff499be8e9d8">generateFunction</a>(ss, <span class="stringliteral">&quot;evaluate&quot;</span>, <span class="stringliteral">&quot;__global const double*&quot;</span>, <span class="stringliteral">&quot;__global double*&quot;</span>, <span class="stringliteral">&quot;double&quot;</span>, gen);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="comment">// Form c-string</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    std::string s = ss.str();</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">verbose</a>()) {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot;Kernel source code for numerical evaluation:&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;      <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot; ***** &quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; s;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      <a class="code" href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">userOut</a>() &lt;&lt; <span class="stringliteral">&quot; ***** &quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    }</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* cstr = s.c_str();</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="comment">// Parse kernel source code</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    program_ = clCreateProgramWithSource(sparsity_propagation_kernel_.context, 1,</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                                         static_cast&lt;const char **&gt;(&amp;cstr), 0, &amp;ret);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    casadi_assert(program_ != 0);</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="comment">// Build Kernel Program</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    compileProgram(program_);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="comment">// Create OpenCL kernel for forward propatation</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    kernel_ = clCreateKernel(program_, <span class="stringliteral">&quot;evaluate&quot;</span>, &amp;ret);</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="comment">// Memory buffer for each of the input arrays</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    input_memobj_.resize(<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a85e89a48263b1f8c6902a029f39d5ebe">n_in</a>(), static_cast&lt;cl_mem&gt;(0));</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;input_memobj_.size(); ++i) {</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      input_memobj_[i] = clCreateBuffer(sparsity_propagation_kernel_.context,</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                                        CL_MEM_READ_ONLY | CL_MEM_USE_HOST_PTR,</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                                        inputNoCheck(i).size() * <span class="keyword">sizeof</span>(cl_double),</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                                        static_cast&lt;void*&gt;(inputNoCheck(i).ptr()), &amp;ret);</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    }</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="comment">// Memory buffer for each of the output arrays</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    output_memobj_.resize(<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#abda391e5e8300917c6a2c9a0d3fbca42">n_out</a>(), static_cast&lt;cl_mem&gt;(0));</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;output_memobj_.size(); ++i) {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      output_memobj_[i] = clCreateBuffer(sparsity_propagation_kernel_.context,</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                                         CL_MEM_WRITE_ONLY | CL_MEM_USE_HOST_PTR,</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                                         outputNoCheck(i).size() * <span class="keyword">sizeof</span>(cl_double),</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                                         static_cast&lt;void*&gt;(outputNoCheck(i).ptr()), &amp;ret);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    }</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="keywordtype">void</span> SXFunction::evaluateOpenCL() {</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <span class="comment">// OpenCL return flag</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    cl_int ret;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="comment">// Set OpenCL Kernel Parameters</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="keywordtype">int</span> kernel_arg = 0;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="comment">// Pass inputs</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a85e89a48263b1f8c6902a029f39d5ebe">n_in</a>(); ++i) {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      ret = clSetKernelArg(kernel_, kernel_arg++,</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                           <span class="keyword">sizeof</span>(cl_mem), static_cast&lt;void *&gt;(&amp;input_memobj_[i]));</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;      casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    }</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="comment">// Pass outputs</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#abda391e5e8300917c6a2c9a0d3fbca42">n_out</a>(); ++i) {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      ret = clSetKernelArg(kernel_, kernel_arg++, <span class="keyword">sizeof</span>(cl_mem),</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                           static_cast&lt;void *&gt;(&amp;output_memobj_[i]));</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    }</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="comment">// Execute OpenCL Kernel</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    executeKernel(kernel_);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="comment">// Get outputs</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;output_memobj_.size(); ++i) {</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      ret = clEnqueueReadBuffer(sparsity_propagation_kernel_.command_queue, output_memobj_[i],</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                                CL_TRUE, 0,</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                                outputNoCheck(i).size() * <span class="keyword">sizeof</span>(cl_double),</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                                reinterpret_cast&lt;void*&gt;(outputNoCheck(i).ptr()), 0, NULL, NULL);</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      casadi_assert(ret == CL_SUCCESS);</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    }</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  }</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <span class="keywordtype">void</span> SXFunction::freeOpenCL() {</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="comment">// OpenCL return flag</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    cl_int ret;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="comment">// Clean up memory for input buffers</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordflow">for</span> (vector&lt;cl_mem&gt;::iterator i=input_memobj_.begin(); i!=input_memobj_.end(); ++i) {</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;      <span class="keywordflow">if</span> (*i != 0) {</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        ret = clReleaseMemObject(*i);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        casadi_assert_warning(ret == CL_SUCCESS, <span class="stringliteral">&quot;Freeing OpenCL memory failed&quot;</span>);</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      }</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    }</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    input_memobj_.clear();</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <span class="comment">// Clean up memory for output buffers</span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="keywordflow">for</span> (vector&lt;cl_mem&gt;::iterator i=output_memobj_.begin(); i!=output_memobj_.end(); ++i) {</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      <span class="keywordflow">if</span> (*i != 0) {</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        ret = clReleaseMemObject(*i);</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        casadi_assert_warning(ret == CL_SUCCESS, <span class="stringliteral">&quot;Freeing OpenCL memory failed&quot;</span>);</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      }</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    }</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    output_memobj_.clear();</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="comment">// Free opencl numerical evaluation kernel</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordflow">if</span> (kernel_!=0) {</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      ret = clReleaseKernel(kernel_);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      casadi_assert_warning(ret == CL_SUCCESS, <span class="stringliteral">&quot;Freeing OpenCL memory failed&quot;</span>);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      kernel_ = 0;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    }</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="comment">// Free opencl program</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="keywordflow">if</span> (program_!=0) {</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      ret = clReleaseProgram(program_);</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      casadi_assert_warning(ret == CL_SUCCESS, <span class="stringliteral">&quot;Freeing OpenCL memory failed&quot;</span>);</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;      program_ = 0;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    }</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  }</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <span class="keywordtype">void</span> SXFunction::compileProgram(cl_program program) {</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="comment">// OpenCL return flag</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    cl_int ret;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    ret = clBuildProgram(program, 1, &amp;sparsity_propagation_kernel_.device_id, NULL, NULL, NULL);</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">if</span> (ret!=CL_SUCCESS) {</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span>* msg;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      <span class="keywordflow">switch</span> (ret) {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <span class="keywordflow">case</span> CL_INVALID_PROGRAM: msg = <span class="stringliteral">&quot;Program is not a valid program object.&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <span class="keywordflow">case</span> CL_INVALID_VALUE: msg = <span class="stringliteral">&quot;(1) Device_list is NULL and num_devices is greater than zero, &quot;</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;              <span class="stringliteral">&quot;or device_list is not NULL and num_devices is zero. (2) pfn_notify &quot;</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;              <span class="stringliteral">&quot;is NULL but user_data is not NULL.&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      <span class="keywordflow">case</span> CL_INVALID_DEVICE: msg = <span class="stringliteral">&quot;OpenCL devices listed in device_list are not in the &quot;</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;              <span class="stringliteral">&quot;list of devices associated with program&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      <span class="keywordflow">case</span> CL_INVALID_BINARY: msg = <span class="stringliteral">&quot;Program is created with clCreateWithProgramBinary and &quot;</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;              <span class="stringliteral">&quot;devices listed in device_list do not have a valid program binary loaded.&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;      <span class="keywordflow">case</span> CL_INVALID_BUILD_OPTIONS: msg = <span class="stringliteral">&quot;The build options specified by options are invalid. &quot;</span>;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      <span class="keywordflow">case</span> CL_INVALID_OPERATION: msg = <span class="stringliteral">&quot;(1) The build of a program executable for any of the &quot;</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;              <span class="stringliteral">&quot;devices listed in device_list by a previous call to clBuildProgram for program &quot;</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;              <span class="stringliteral">&quot;has not completed. (2) There are kernel objects attached to program. &quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      <span class="keywordflow">case</span> CL_COMPILER_NOT_AVAILABLE: msg = <span class="stringliteral">&quot;Program is created with clCreateProgramWithSource &quot;</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;              <span class="stringliteral">&quot;and a compiler is not available i.e. CL_DEVICE_COMPILER_AVAILABLE specified &quot;</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;              <span class="stringliteral">&quot;in table 4.3 is set to CL_FALSE.&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;      <span class="keywordflow">case</span> CL_BUILD_PROGRAM_FAILURE: {</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;        msg = <span class="stringliteral">&quot;There is a failure to build the program executable. This error will be &quot;</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            <span class="stringliteral">&quot;returned if clBuildProgram does not return until the build has completed. &quot;</span>;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        <span class="comment">// Determine the size of the log</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        <span class="keywordtype">size_t</span> log_size;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        clGetProgramBuildInfo(program, sparsity_propagation_kernel_.device_id,</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                              CL_PROGRAM_BUILD_LOG, 0, NULL, &amp;log_size);</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        <span class="comment">// Allocate memory for the log</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        std::vector&lt;char&gt; <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#aaa4c994d59ed8b4903c3cb6eefa83b5e">log</a>;</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        log.resize(log_size);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        <span class="comment">// Print the log</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        clGetProgramBuildInfo(program, sparsity_propagation_kernel_.device_id,</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                              CL_PROGRAM_BUILD_LOG, log_size, &amp;(log[0]), NULL);</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        userOut&lt;true, PL_WARN&gt;() &lt;&lt; log &lt;&lt; endl;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      }</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      <span class="keywordflow">case</span> CL_OUT_OF_RESOURCES: msg = <span class="stringliteral">&quot;There is a failure to allocate resources required by the &quot;</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;              <span class="stringliteral">&quot;OpenCL implementation on the device.&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      <span class="keywordflow">case</span> CL_OUT_OF_HOST_MEMORY: msg = <span class="stringliteral">&quot;There is a failure to allocate resources required by &quot;</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;              <span class="stringliteral">&quot;the OpenCL implementation on the host.&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      <span class="keywordflow">default</span>: msg = <span class="stringliteral">&quot;Unknown error&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      }</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      casadi_error(<span class="stringliteral">&quot;clBuildProgram failed: &quot;</span> &lt;&lt; msg);</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    }</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  }</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <span class="keywordtype">void</span> SXFunction::executeKernel(cl_kernel kernel) {</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="comment">// OpenCL return flag</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    cl_int ret;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="comment">// Execute OpenCL kernel</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    ret = clEnqueueTask(sparsity_propagation_kernel_.command_queue, kernel, 0, NULL, NULL);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <span class="keywordflow">if</span> (ret!=CL_SUCCESS) {</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span>* msg;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;      <span class="keywordflow">switch</span> (ret) {</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      <span class="keywordflow">case</span> CL_INVALID_PROGRAM_EXECUTABLE:</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;          msg = <span class="stringliteral">&quot;There is no successfully built program executable available &quot;</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;                <span class="stringliteral">&quot;for device associated with command_queue.&quot;</span>;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      <span class="keywordflow">case</span> CL_INVALID_COMMAND_QUEUE: msg = <span class="stringliteral">&quot;Command_queue is not a valid command-queue.&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      <span class="keywordflow">case</span> CL_INVALID_KERNEL: msg = <span class="stringliteral">&quot;Kernel is not a valid kernel object.&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <span class="keywordflow">case</span> CL_INVALID_CONTEXT:</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;          msg = <span class="stringliteral">&quot;Context associated with command_queue and kernel are not the &quot;</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                <span class="stringliteral">&quot;same or if the context associated with command_queue and &quot;</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                <span class="stringliteral">&quot;events in event_wait_list are not the same.&quot;</span>;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <span class="keywordflow">case</span> CL_INVALID_KERNEL_ARGS: msg = <span class="stringliteral">&quot;The kernel argument values have not been specified.&quot;</span>;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      <span class="keywordflow">case</span> CL_INVALID_WORK_GROUP_SIZE:</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;          msg = <span class="stringliteral">&quot;A work-group size is specified for kernel using the &quot;</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;              <span class="stringliteral">&quot;__attribute__((reqd_work_group_size(X, Y, Z))) qualifier in &quot;</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;              <span class="stringliteral">&quot;program source and is not (1, 1, 1).&quot;</span>;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      <span class="keywordflow">case</span> CL_MISALIGNED_SUB_BUFFER_OFFSET:</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;          msg = <span class="stringliteral">&quot;A sub-buffer object is specified as the value for an argument&quot;</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;              <span class="stringliteral">&quot; that is a buffer object and the offset specified when the &quot;</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;              <span class="stringliteral">&quot;sub-buffer object is created is not aligned to &quot;</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;              <span class="stringliteral">&quot;CL_DEVICE_MEM_BASE_ADDR_ALIGN value for device associated with &quot;</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;              <span class="stringliteral">&quot;queue.&quot;</span>;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      <span class="keywordflow">case</span> CL_INVALID_IMAGE_SIZE:</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;          msg = <span class="stringliteral">&quot;n image object is specified as an argument value and the image&quot;</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;              <span class="stringliteral">&quot; dimensions (image width, height, specified or compute col &quot;</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;              <span class="stringliteral">&quot;and/or slice pitch) are not supported by device associated &quot;</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;              <span class="stringliteral">&quot;with queue&quot;</span>;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      <span class="keywordflow">case</span> CL_OUT_OF_RESOURCES:</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;          msg = <span class="stringliteral">&quot;(1) There is a failure to queue the execution instance of &quot;</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;              <span class="stringliteral">&quot;kernel on the command-queue because of insufficient resources&quot;</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;              <span class="stringliteral">&quot; needed to execute the kernel. (2) There is a failure to &quot;</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;              <span class="stringliteral">&quot;allocate resources required by the OpenCL implementation &quot;</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;              <span class="stringliteral">&quot;on the device.&quot;</span>;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      <span class="keywordflow">case</span> CL_MEM_OBJECT_ALLOCATION_FAILURE:</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;          msg = <span class="stringliteral">&quot;There is a failure to allocate memory for data store &quot;</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;              <span class="stringliteral">&quot;associated with image or buffer objects specified as &quot;</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;              <span class="stringliteral">&quot;arguments to kernel.&quot;</span>;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <span class="keywordflow">case</span> CL_INVALID_EVENT_WAIT_LIST:</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;          msg = <span class="stringliteral">&quot;Event_wait_list is NULL and num_events_in_wait_list &gt; 0, or &quot;</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;              <span class="stringliteral">&quot;event_wait_list is not NULL and num_events_in_wait_list is 0, &quot;</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;              <span class="stringliteral">&quot;or if event objects in event_wait_list are not valid events. &quot;</span>;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;      <span class="keywordflow">case</span> CL_OUT_OF_HOST_MEMORY:</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;          msg = <span class="stringliteral">&quot;There is a failure to allocate resources required by the &quot;</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;              <span class="stringliteral">&quot;OpenCL implementation on the host.&quot;</span>;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;      <span class="keywordflow">default</span>: msg = <span class="stringliteral">&quot;Unknown error&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      }</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      casadi_error(<span class="stringliteral">&quot;clEnqueueTask failed: &quot;</span> &lt;&lt; msg);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    }</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  }</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="preprocessor">#endif // WITH_OPENCL</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div>
<div class="line"><a name="l01362"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#a53c22e4e0a4ab4c1b834d6c6104c2d1d"> 1362</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a53c22e4e0a4ab4c1b834d6c6104c2d1d">SXFunction::forward_sx</a>(<span class="keyword">const</span> std::vector&lt;SX&gt;&amp; arg, <span class="keyword">const</span> std::vector&lt;SX&gt;&amp; res,</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                                   <span class="keyword">const</span> std::vector&lt;std::vector&lt;SX&gt; &gt;&amp; fseed,</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;                                   std::vector&lt;std::vector&lt;SX&gt; &gt;&amp; fsens,</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;                                   <span class="keywordtype">bool</span> always_inline, <span class="keywordtype">bool</span> never_inline) {</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="comment">// Consistency check</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    casadi_assert_message(!never_inline, <span class="stringliteral">&quot;SX expressions do not have call nodes&quot;</span>);</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="comment">// Call inlining</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#a090138048afe2f17dd0453250b3613eb">forward_x</a>(arg, res, fseed, fsens);</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  }</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;</div>
<div class="line"><a name="l01373"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#affcd1a28a07b6184d001420773dfa697"> 1373</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#affcd1a28a07b6184d001420773dfa697">SXFunction::reverse_sx</a>(<span class="keyword">const</span> std::vector&lt;SX&gt;&amp; arg, <span class="keyword">const</span> std::vector&lt;SX&gt;&amp; res,</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;                                 <span class="keyword">const</span> std::vector&lt;std::vector&lt;SX&gt; &gt;&amp; aseed,</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;                                 std::vector&lt;std::vector&lt;SX&gt; &gt;&amp; asens,</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                                 <span class="keywordtype">bool</span> always_inline, <span class="keywordtype">bool</span> never_inline) {</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="comment">// Consistency check</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    casadi_assert_message(!never_inline, <span class="stringliteral">&quot;SX expressions do not have call nodes&quot;</span>);</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="comment">// Call inlining</span></div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afaad23ce5b7e07a415f132454da851e9">reverse_x</a>(arg, res, aseed, asens);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  }</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;</div>
<div class="line"><a name="l01384"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#a19ca11644ec3d0485e36e8d45b1671ca"> 1384</a></span>&#160;  <a class="code" href="../../dd/df2/singletoncasadi_1_1Matrix.html">SX</a> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a19ca11644ec3d0485e36e8d45b1671ca">SXFunction::grad_sx</a>(<span class="keywordtype">int</span> iind, <span class="keywordtype">int</span> oind) {</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afb176828928480711f1af2d541faa437">grad</a>(iind, oind);</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  }</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;</div>
<div class="line"><a name="l01388"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#a44d4a7c02fc2c1df6d0c89368e9d02c8"> 1388</a></span>&#160;  <a class="code" href="../../dd/df2/singletoncasadi_1_1Matrix.html">SX</a> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a44d4a7c02fc2c1df6d0c89368e9d02c8">SXFunction::tang_sx</a>(<span class="keywordtype">int</span> iind, <span class="keywordtype">int</span> oind) {</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#ab566e3ec625228a5bd22a392f8dfa0b4">tang</a>(iind, oind);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  }</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div>
<div class="line"><a name="l01392"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#af2896d12c1efb90c43efa80b84d269cd"> 1392</a></span>&#160;  <a class="code" href="../../dd/df2/singletoncasadi_1_1Matrix.html">SX</a> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#af2896d12c1efb90c43efa80b84d269cd">SXFunction::jac_sx</a>(<span class="keywordtype">int</span> iind, <span class="keywordtype">int</span> oind, <span class="keywordtype">bool</span> compact, <span class="keywordtype">bool</span> symmetric,</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;                              <span class="keywordtype">bool</span> always_inline, <span class="keywordtype">bool</span> never_inline) {</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#adb4c2063102f4c513bc780ead253e07a">jac</a>(iind, oind, compact, symmetric, always_inline, never_inline);</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  }</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;</div>
<div class="line"><a name="l01397"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#a92ef21894e376b658a6eefdb54c02575"> 1397</a></span>&#160;  <a class="code" href="../../dd/df2/singletoncasadi_1_1Matrix.html">SX</a> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a92ef21894e376b658a6eefdb54c02575">SXFunction::hess_sx</a>(<span class="keywordtype">int</span> iind, <span class="keywordtype">int</span> oind) {</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a4aa9d894bbe2bd9cab124b928562bf44">hess</a>(iind, oind);</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  }</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div>
<div class="line"><a name="l01401"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#ae8804341ca1a42e78bf5dd3041bfa28a"> 1401</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="../../dd/df2/singletoncasadi_1_1Matrix.html">SX</a> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ac37fad0eec2ce12974284c5d3a9a18e7">SXFunction::sx_in</a>(<span class="keywordtype">int</span> ind)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afadcdcae1e6a79c094eaaed70dc86530">inputv_</a>.at(ind);</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  }</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div>
<div class="line"><a name="l01405"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#ac37fad0eec2ce12974284c5d3a9a18e7"> 1405</a></span>&#160;  <span class="keyword">const</span> std::vector&lt;SX&gt; <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#ac37fad0eec2ce12974284c5d3a9a18e7">SXFunction::sx_in</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html#afadcdcae1e6a79c094eaaed70dc86530">inputv_</a>;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  }</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div>
<div class="line"><a name="l01409"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#a34218b404ad63772274c4632a10e5e02"> 1409</a></span>&#160;  std::string <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a34218b404ad63772274c4632a10e5e02">SXFunction::type_name</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;sxfunction&quot;</span>;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  }</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div>
<div class="line"><a name="l01413"></a><span class="lineno"><a class="line" href="../../df/d79/classcasadi_1_1SXFunction.html#a0d311726652a2934ad4616c0d313ed4e"> 1413</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a0d311726652a2934ad4616c0d313ed4e">SXFunction::is_a</a>(<span class="keyword">const</span> std::string&amp; type, <span class="keywordtype">bool</span> recursive)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="keywordflow">return</span> type==<span class="stringliteral">&quot;sxfunction&quot;</span> || (recursive &amp;&amp; <a class="code" href="../../d7/d72/classcasadi_1_1XFunction.html">XFunction</a>&lt;<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#afd0b8a9ae91af6aedbc87d1b588581fd">SXFunction</a>,</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                                  <a class="code" href="../../d7/d23/namespacecasadi.html#a77ea10c3c8f78d7a80e15b83af5b7a82">SX</a>, <a class="code" href="../../d7/d8b/classcasadi_1_1SXNode.html">SXNode</a>&gt;<a class="code" href="../../df/d79/classcasadi_1_1SXFunction.html#a0d311726652a2934ad4616c0d313ed4e">::is_a</a>(type, recursive));</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  }</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;} <span class="comment">// namespace casadi</span></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html">casadi::SXFunction</a></div><div class="ttdoc">Internal node class for SXFunction Do not use any internal class directly - always use the public Fun...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db0/sx__function_8hpp_source.html#l00086">sx_function.hpp:86</a></div></div>
<div class="ttc" id="classcasadi_1_1SXNode_html"><div class="ttname"><a href="../../d7/d8b/classcasadi_1_1SXNode.html">casadi::SXNode</a></div><div class="ttdoc">Internal node class for SX. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d22/sx__node_8hpp_source.html#l00045">sx_node.hpp:45</a></div></div>
<div class="ttc" id="classcasadi_1_1XFunction_html_afb176828928480711f1af2d541faa437"><div class="ttname"><a href="../../d7/d72/classcasadi_1_1XFunction.html#afb176828928480711f1af2d541faa437">casadi::XFunction&lt; SXFunction, Matrix&lt; SXElem &gt;, SXNode &gt;::grad</a></div><div class="ttdeci">Matrix&lt; SXElem &gt; grad(int iind=0, int oind=0)</div><div class="ttdoc">Gradient via source code transformation. </div></div>
<div class="ttc" id="namespacecasadi_html_a217d5abb0932b6c65a8f966dbf101cdc"><div class="ttname"><a href="../../d7/d23/namespacecasadi.html#a217d5abb0932b6c65a8f966dbf101cdc">casadi::project</a></div><div class="ttdeci">void CASADI_PREFIX() project(const real_t *x, const int *sp_x, real_t *y, const int *sp_y, real_t *w)</div><div class="ttdoc">Sparse copy: y <- x, w work vector (length >= number of rows) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df9/runtime_8hpp_source.html#l00168">runtime.hpp:168</a></div></div>
<div class="ttc" id="namespacecasadi_html_a77ea10c3c8f78d7a80e15b83af5b7a82"><div class="ttname"><a href="../../d7/d23/namespacecasadi.html#a77ea10c3c8f78d7a80e15b83af5b7a82">casadi::SX</a></div><div class="ttdeci">Matrix&lt; SXElem &gt; SX</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5b/sx__elem_8hpp_source.html#l00258">sx_elem.hpp:258</a></div></div>
<div class="ttc" id="namespacecasadi_html_add9e57eb6393010728e86325c95af1e8"><div class="ttname"><a href="../../d7/d23/namespacecasadi.html#add9e57eb6393010728e86325c95af1e8">casadi::fill</a></div><div class="ttdeci">void CASADI_PREFIX() fill(real_t *x, int n, real_t alpha)</div><div class="ttdoc">FILL: x <- alpha. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df9/runtime_8hpp_source.html#l00280">runtime.hpp:280</a></div></div>
<div class="ttc" id="classcasadi_1_1Function_html"><div class="ttname"><a href="../../da/da4/classcasadi_1_1Function.html">casadi::Function</a></div><div class="ttdoc">General function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7c/function_8hpp_source.html#l00103">function.hpp:103</a></div></div>
<div class="ttc" id="classcasadi_1_1SXElem_html"><div class="ttname"><a href="../../d0/d06/classcasadi_1_1SXElem.html">casadi::SXElem</a></div><div class="ttdoc">The basic scalar symbolic class of CasADi. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5b/sx__elem_8hpp_source.html#l00058">sx_elem.hpp:58</a></div></div>
<div class="ttc" id="structcasadi_1_1ScalarAtomic_html_a173be0614ad8b74808246cb341b2eea1"><div class="ttname"><a href="../../de/d54/structcasadi_1_1ScalarAtomic.html#a173be0614ad8b74808246cb341b2eea1">casadi::ScalarAtomic::i1</a></div><div class="ttdeci">int i1</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db0/sx__function_8hpp_source.html#l00047">sx_function.hpp:47</a></div></div>
<div class="ttc" id="namespacecasadi_html_af35251805e44185cb1f079ec41808618a772d0d4a7fe8303114d42995378698d1"><div class="ttname"><a href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a772d0d4a7fe8303114d42995378698d1">casadi::OP_INPUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d90/calculus_8hpp_source.html#l00079">calculus.hpp:79</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_ac37fad0eec2ce12974284c5d3a9a18e7"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#ac37fad0eec2ce12974284c5d3a9a18e7">casadi::SXFunction::sx_in</a></div><div class="ttdeci">virtual const std::vector&lt; SX &gt; sx_in() const </div><div class="ttdoc">Get function input(s) and output(s) </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l01405">sx_function.cpp:1405</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_acccb92bc31e708d8419748e99a5a18d5"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#acccb92bc31e708d8419748e99a5a18d5">casadi::SXFunction::algorithm_</a></div><div class="ttdeci">std::vector&lt; AlgEl &gt; algorithm_</div><div class="ttdoc">all binary nodes of the tree in the order of execution </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db0/sx__function_8hpp_source.html#l00201">sx_function.hpp:201</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_acd701154519bf9f8d787a936ef95246c"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#acd701154519bf9f8d787a936ef95246c">casadi::FunctionInternal::alloc_w</a></div><div class="ttdeci">void alloc_w(size_t sz_w, bool persistent=false)</div><div class="ttdoc">Ensure required length of w field. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db4/function__internal_8cpp_source.html#l02284">function_internal.cpp:2284</a></div></div>
<div class="ttc" id="namespacecasadi_html_a74a07d00866ce86187cc0f081d340015ac06f59cf6da05161b5feaf28ae9b78a3"><div class="ttname"><a href="../../d7/d23/namespacecasadi.html#a74a07d00866ce86187cc0f081d340015ac06f59cf6da05161b5feaf28ae9b78a3">casadi::OT_DOUBLEVECTOR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d30/generic__type_8hpp_source.html#l00048">generic_type.hpp:48</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_a3a1e4edbb5b0d906e280b3ffb4d9068e"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a3a1e4edbb5b0d906e280b3ffb4d9068e">casadi::FunctionInternal::sz_w</a></div><div class="ttdeci">size_t sz_w() const </div><div class="ttdoc">Get required length of w field. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4f/function__internal_8hpp_source.html#l00667">function_internal.hpp:667</a></div></div>
<div class="ttc" id="classcasadi_1_1InterruptHandler_html_a49091eb550d4bf8da4f31e49835608df"><div class="ttname"><a href="../../d7/d38/classcasadi_1_1InterruptHandler.html#a49091eb550d4bf8da4f31e49835608df">casadi::InterruptHandler::check</a></div><div class="ttdeci">static void check()</div><div class="ttdoc">Raises an error if an interrupt was captured. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df3/casadi__interrupt_8hpp_source.html#l00062">casadi_interrupt.hpp:62</a></div></div>
<div class="ttc" id="classcasadi_1_1CodeGenerator_html_a959644c919d2d5bbbc254e747f585e51"><div class="ttname"><a href="../../d1/da2/classcasadi_1_1CodeGenerator.html#a959644c919d2d5bbbc254e747f585e51">casadi::CodeGenerator::constant</a></div><div class="ttdeci">static std::string constant(double v)</div><div class="ttdoc">Print a constant in a lossless but compact manner. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d92/code__generator_8cpp_source.html#l00690">code_generator.cpp:690</a></div></div>
<div class="ttc" id="structcasadi_1_1casadi__math_html_aa2d8b868fb9bdb88bddc0076d5b99176"><div class="ttname"><a href="../../d2/d93/structcasadi_1_1casadi__math.html#aa2d8b868fb9bdb88bddc0076d5b99176">casadi::casadi_math::printPost</a></div><div class="ttdeci">static void printPost(unsigned char op, std::ostream &amp;stream)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d90/calculus_8hpp_source.html#l01546">calculus.hpp:1546</a></div></div>
<div class="ttc" id="classcasadi_1_1CodeGenerator_html_ad059828b805503016d81b97e53336f06"><div class="ttname"><a href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">casadi::CodeGenerator::body</a></div><div class="ttdeci">std::stringstream body</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dde/code__generator_8hpp_source.html#l00225">code_generator.hpp:225</a></div></div>
<div class="ttc" id="structcasadi_1_1ScalarAtomic_html_a5b5705a3602143a20dd1ac90a2490715"><div class="ttname"><a href="../../de/d54/structcasadi_1_1ScalarAtomic.html#a5b5705a3602143a20dd1ac90a2490715">casadi::ScalarAtomic::op</a></div><div class="ttdeci">int op</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db0/sx__function_8hpp_source.html#l00043">sx_function.hpp:43</a></div></div>
<div class="ttc" id="namespacecasadi_html_af35251805e44185cb1f079ec41808618a521a7c58943e1b877b6e73d79948cb68"><div class="ttname"><a href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a521a7c58943e1b877b6e73d79948cb68">casadi::OP_OUTPUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d90/calculus_8hpp_source.html#l00079">calculus.hpp:79</a></div></div>
<div class="ttc" id="classcasadi_1_1SXElem_html_ac35f5ea925d55bbc39b0858174ec36a3"><div class="ttname"><a href="../../d0/d06/classcasadi_1_1SXElem.html#ac35f5ea925d55bbc39b0858174ec36a3">casadi::SXElem::assignIfDuplicate</a></div><div class="ttdeci">void assignIfDuplicate(const SXElem &amp;scalar, int depth=1)</div><div class="ttdoc">Assign to another expression, if a duplicate. Check for equality up to a given depth. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d7e/sx__elem_8cpp_source.html#l00102">sx_elem.cpp:102</a></div></div>
<div class="ttc" id="classcasadi_1_1GenericMatrix_html_a8474a2a70e32d853e3b7b71f024c3c27"><div class="ttname"><a href="../../dc/df3/classcasadi_1_1GenericMatrix.html#a8474a2a70e32d853e3b7b71f024c3c27">casadi::GenericMatrix&lt; Matrix&lt; SXElem &gt; &gt;::zeros</a></div><div class="ttdeci">static Matrix&lt; SXElem &gt; zeros(int nrow=1, int ncol=1)</div><div class="ttdoc">Create a dense matrix or a matrix with specified sparsity with all entries zero. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d90/generic__matrix_8hpp_source.html#l00651">generic_matrix.hpp:651</a></div></div>
<div class="ttc" id="namespacecasadi_html_aa67607f24e1ba643c495940f006cc4ab"><div class="ttname"><a href="../../d7/d23/namespacecasadi.html#aa67607f24e1ba643c495940f006cc4ab">casadi::userOut</a></div><div class="ttdeci">std::ostream &amp; userOut()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de4/casadi__logger_8hpp_source.html#l00170">casadi_logger.hpp:170</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_ac8ef992a939d171eb3563ece70112909"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#ac8ef992a939d171eb3563ece70112909">casadi::FunctionInternal::print</a></div><div class="ttdeci">virtual void print(std::ostream &amp;stream) const </div><div class="ttdoc">Print. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db4/function__internal_8cpp_source.html#l00437">function_internal.cpp:437</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_a09c314e70e5e04387fdb01cb9097ecaa"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#a09c314e70e5e04387fdb01cb9097ecaa">casadi::SXFunction::operations_</a></div><div class="ttdeci">std::vector&lt; SXElem &gt; operations_</div><div class="ttdoc">The expressions corresponding to each binary operation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db0/sx__function_8hpp_source.html#l00208">sx_function.hpp:208</a></div></div>
<div class="ttc" id="classcasadi_1_1SXNode_html_a4cf41880a6a9508731da0788066fb193"><div class="ttname"><a href="../../d7/d8b/classcasadi_1_1SXNode.html#a4cf41880a6a9508731da0788066fb193">casadi::SXNode::is_symbolic</a></div><div class="ttdeci">virtual bool is_symbolic() const </div><div class="ttdoc">check properties of a node </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d08/sx__node_8cpp_source.html#l00093">sx_node.cpp:93</a></div></div>
<div class="ttc" id="classcasadi_1_1SXElem_html_a7cc1d968105fb2e26c3c23e89302626b"><div class="ttname"><a href="../../d0/d06/classcasadi_1_1SXElem.html#a7cc1d968105fb2e26c3c23e89302626b">casadi::SXElem::get</a></div><div class="ttdeci">SXNode * get() const </div><div class="ttdoc">Get a pointer to the node. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d7e/sx__elem_8cpp_source.html#l00170">sx_elem.cpp:170</a></div></div>
<div class="ttc" id="singletoncasadi_1_1Matrix_html_af124a732d7f7b8a9c797683d292b139e"><div class="ttname"><a href="../../dd/df2/singletoncasadi_1_1Matrix.html#af124a732d7f7b8a9c797683d292b139e">casadi::Matrix&lt; SXElem &gt;::jacobian</a></div><div class="ttdeci">static Matrix&lt; SXElem &gt; jacobian(const Matrix&lt; SXElem &gt; &amp;f, const Matrix&lt; SXElem &gt; &amp;x, bool symmetric=false)</div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="../../d8/dcc/namespacestd.html">std</a></div><div class="ttdoc">Convenience tools for C++ Standard Library vectors. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d76/casadi__instantiations_8cpp_source.html#l00063">casadi_instantiations.cpp:63</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_af5d5f08f603559b2d988a0c5acc17a29"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#af5d5f08f603559b2d988a0c5acc17a29">casadi::SXFunction::eval</a></div><div class="ttdeci">virtual void eval(void *mem, const double **arg, double **res, int *iw, double *w) const </div><div class="ttdoc">Evaluate numerically, work vectors given. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l00073">sx_function.cpp:73</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_a9252cd85e4aaad15d021833146b59401"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a9252cd85e4aaad15d021833146b59401">casadi::FunctionInternal::options_</a></div><div class="ttdeci">static Options options_</div><div class="ttdoc">Options. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4f/function__internal_8hpp_source.html#l00088">function_internal.hpp:88</a></div></div>
<div class="ttc" id="classcasadi_1_1XFunction_html_ab566e3ec625228a5bd22a392f8dfa0b4"><div class="ttname"><a href="../../d7/d72/classcasadi_1_1XFunction.html#ab566e3ec625228a5bd22a392f8dfa0b4">casadi::XFunction&lt; SXFunction, Matrix&lt; SXElem &gt;, SXNode &gt;::tang</a></div><div class="ttdeci">Matrix&lt; SXElem &gt; tang(int iind=0, int oind=0)</div><div class="ttdoc">Tangent via source code transformation. </div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_aaa4c994d59ed8b4903c3cb6eefa83b5e"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#aaa4c994d59ed8b4903c3cb6eefa83b5e">casadi::FunctionInternal::log</a></div><div class="ttdeci">void log(const std::string &amp;msg) const </div><div class="ttdoc">Log the status of the solver. </div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_ae431efa6e8fddc3a72d31da0cc6f2187"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#ae431efa6e8fddc3a72d31da0cc6f2187">casadi::SXFunction::default_in_</a></div><div class="ttdeci">std::vector&lt; double &gt; default_in_</div><div class="ttdoc">Default input values. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db0/sx__function_8hpp_source.html#l00214">sx_function.hpp:214</a></div></div>
<div class="ttc" id="structcasadi_1_1casadi__math_html_a24738264198d8ce887b327247da83f97"><div class="ttname"><a href="../../d2/d93/structcasadi_1_1casadi__math.html#a24738264198d8ce887b327247da83f97">casadi::casadi_math::printSep</a></div><div class="ttdeci">static void printSep(unsigned char op, std::ostream &amp;stream)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d90/calculus_8hpp_source.html#l01528">calculus.hpp:1528</a></div></div>
<div class="ttc" id="structcasadi_1_1ScalarAtomic_html_ae8b444afe94b02fe81b400c08e340e72"><div class="ttname"><a href="../../de/d54/structcasadi_1_1ScalarAtomic.html#ae8b444afe94b02fe81b400c08e340e72">casadi::ScalarAtomic::i0</a></div><div class="ttdeci">int i0</div><div class="ttdoc">Operator index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db0/sx__function_8hpp_source.html#l00044">sx_function.hpp:44</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_abda391e5e8300917c6a2c9a0d3fbca42"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#abda391e5e8300917c6a2c9a0d3fbca42">casadi::FunctionInternal::n_out</a></div><div class="ttdeci">int n_out() const </div><div class="ttdoc">Number of function inputs and outputs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4f/function__internal_8hpp_source.html#l00520">function_internal.hpp:520</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_ab7e15da195f1cd90babb987a31bc5659"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#ab7e15da195f1cd90babb987a31bc5659">casadi::SXFunction::~SXFunction</a></div><div class="ttdeci">virtual ~SXFunction()</div><div class="ttdoc">Destructor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l00065">sx_function.cpp:65</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_a5c3980a557364a6853c17e9abcf6030a"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#a5c3980a557364a6853c17e9abcf6030a">casadi::SXFunction::init</a></div><div class="ttdeci">virtual void init(const Dict &amp;opts)</div><div class="ttdoc">Initialize. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l00251">sx_function.cpp:251</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_a85e89a48263b1f8c6902a029f39d5ebe"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a85e89a48263b1f8c6902a029f39d5ebe">casadi::FunctionInternal::n_in</a></div><div class="ttdeci">int n_in() const </div><div class="ttdoc">Number of function inputs and outputs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4f/function__internal_8hpp_source.html#l00518">function_internal.hpp:518</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_aef01fe9eb26f389b4df8762b9b34efb7"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#aef01fe9eb26f389b4df8762b9b34efb7">casadi::SXFunction::getFullJacobian</a></div><div class="ttdeci">virtual Function getFullJacobian()</div><div class="ttdoc">Return Jacobian of all input elements with respect to all output elements. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l00829">sx_function.cpp:829</a></div></div>
<div class="ttc" id="namespacecasadi_html_ac0b357d13f0080474277728f87d771c2"><div class="ttname"><a href="../../d7/d23/namespacecasadi.html#ac0b357d13f0080474277728f87d771c2">casadi::Dict</a></div><div class="ttdeci">GenericType::Dict Dict</div><div class="ttdoc">C++ equivalent of Python&#39;s dict or MATLAB&#39;s struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d30/generic__type_8hpp_source.html#l00177">generic_type.hpp:177</a></div></div>
<div class="ttc" id="structcasadi_1_1casadi__math_html_a46f4551b57cf8bd5aae7ba500092a2d2"><div class="ttname"><a href="../../d2/d93/structcasadi_1_1casadi__math.html#a46f4551b57cf8bd5aae7ba500092a2d2">casadi::casadi_math::printPre</a></div><div class="ttdeci">static void printPre(unsigned char op, std::ostream &amp;stream)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d90/calculus_8hpp_source.html#l01505">calculus.hpp:1505</a></div></div>
<div class="ttc" id="classcasadi_1_1XFunction_html_adb4c2063102f4c513bc780ead253e07a"><div class="ttname"><a href="../../d7/d72/classcasadi_1_1XFunction.html#adb4c2063102f4c513bc780ead253e07a">casadi::XFunction&lt; SXFunction, Matrix&lt; SXElem &gt;, SXNode &gt;::jac</a></div><div class="ttdeci">Matrix&lt; SXElem &gt; jac(int iind=0, int oind=0, bool compact=false, bool symmetric=false, bool always_inline=true, bool never_inline=false)</div><div class="ttdoc">Construct a complete Jacobian by compression. </div></div>
<div class="ttc" id="classcasadi_1_1SXNode_html_a051381aa86d323cf501eb0d23bd2b6b2"><div class="ttname"><a href="../../d7/d8b/classcasadi_1_1SXNode.html#a051381aa86d323cf501eb0d23bd2b6b2">casadi::SXNode::temp</a></div><div class="ttdeci">int temp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d22/sx__node_8hpp_source.html#l00124">sx_node.hpp:124</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_a16db43aaefcb2d4979ea884df0b72032"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#a16db43aaefcb2d4979ea884df0b72032">casadi::SXFunction::generateDeclarations</a></div><div class="ttdeci">virtual void generateDeclarations(CodeGenerator &amp;g) const </div><div class="ttdoc">Generate code for the declarations of the C function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l00178">sx_function.cpp:178</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_aa4d5f13f07d9f54de814350d27b06b23"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#aa4d5f13f07d9f54de814350d27b06b23">casadi::SXFunction::just_in_time_opencl_</a></div><div class="ttdeci">bool just_in_time_opencl_</div><div class="ttdoc">With just-in-time compilation using OpenCL. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db0/sx__function_8hpp_source.html#l00247">sx_function.hpp:247</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_ad83ba546e0240c2bc9586b0bf1e55e54"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#ad83ba546e0240c2bc9586b0bf1e55e54">casadi::SXFunction::free_vars_</a></div><div class="ttdeci">std::vector&lt; SXElem &gt; free_vars_</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db0/sx__function_8hpp_source.html#l00205">sx_function.hpp:205</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_a44d4a7c02fc2c1df6d0c89368e9d02c8"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#a44d4a7c02fc2c1df6d0c89368e9d02c8">casadi::SXFunction::tang_sx</a></div><div class="ttdeci">virtual SX tang_sx(int iind=0, int oind=0)</div><div class="ttdoc">Tangent expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l01388">sx_function.cpp:1388</a></div></div>
<div class="ttc" id="namespacecasadi_html_af35251805e44185cb1f079ec41808618aae6785283527a2b4903fa3aa9f56d3d6"><div class="ttname"><a href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618aae6785283527a2b4903fa3aa9f56d3d6">casadi::OP_PARAMETER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d90/calculus_8hpp_source.html#l00082">calculus.hpp:82</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_a92ef21894e376b658a6eefdb54c02575"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#a92ef21894e376b658a6eefdb54c02575">casadi::SXFunction::hess_sx</a></div><div class="ttdeci">virtual SX hess_sx(int iind, int oind)</div><div class="ttdoc">Hessian expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l01397">sx_function.cpp:1397</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_af2896d12c1efb90c43efa80b84d269cd"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#af2896d12c1efb90c43efa80b84d269cd">casadi::SXFunction::jac_sx</a></div><div class="ttdeci">virtual SX jac_sx(int iind=0, int oind=0, bool compact=false, bool symmetric=false, bool always_inline=true, bool never_inline=false)</div><div class="ttdoc">Jacobian expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l01392">sx_function.cpp:1392</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_ac0e7fcf8b8dc94fd307f6d93013c5da2"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#ac0e7fcf8b8dc94fd307f6d93013c5da2">casadi::SXFunction::eval_sx</a></div><div class="ttdeci">virtual void eval_sx(const SXElem **arg, SXElem **res, int *iw, SXElem *w, int mem)</div><div class="ttdoc">evaluate symbolically while also propagating directional derivatives </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l00528">sx_function.cpp:528</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_ae2ab333a4f258b34f5047b97bc366adf"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#ae2ab333a4f258b34f5047b97bc366adf">casadi::FunctionInternal::repr</a></div><div class="ttdeci">virtual void repr(std::ostream &amp;stream) const </div><div class="ttdoc">Print. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db4/function__internal_8cpp_source.html#l00441">function_internal.cpp:441</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_affcd1a28a07b6184d001420773dfa697"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#affcd1a28a07b6184d001420773dfa697">casadi::SXFunction::reverse_sx</a></div><div class="ttdeci">virtual void reverse_sx(const std::vector&lt; SX &gt; &amp;arg, const std::vector&lt; SX &gt; &amp;res, const std::vector&lt; std::vector&lt; SX &gt; &gt; &amp;aseed, std::vector&lt; std::vector&lt; SX &gt; &gt; &amp;asens, bool always_inline, bool never_inline)</div><div class="ttdoc">Create call to (cached) derivative function, reverse mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l01373">sx_function.cpp:1373</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_aea8b575787346d444e9778cdeb3fd6da"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#aea8b575787346d444e9778cdeb3fd6da">casadi::SXFunction::is_smooth</a></div><div class="ttdeci">bool is_smooth() const </div><div class="ttdoc">Check if smooth. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l00128">sx_function.cpp:128</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_a34218b404ad63772274c4632a10e5e02"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#a34218b404ad63772274c4632a10e5e02">casadi::SXFunction::type_name</a></div><div class="ttdeci">virtual std::string type_name() const </div><div class="ttdoc">Get type name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l01409">sx_function.cpp:1409</a></div></div>
<div class="ttc" id="classcasadi_1_1SXNode_html_af4dc0434270a7adc845617d1a2cfe16b"><div class="ttname"><a href="../../d7/d8b/classcasadi_1_1SXNode.html#af4dc0434270a7adc845617d1a2cfe16b">casadi::SXNode::is_constant</a></div><div class="ttdeci">virtual bool is_constant() const </div><div class="ttdoc">check properties of a node </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d08/sx__node_8cpp_source.html#l00085">sx_node.cpp:85</a></div></div>
<div class="ttc" id="classcasadi_1_1CodeGenerator_html"><div class="ttname"><a href="../../d1/da2/classcasadi_1_1CodeGenerator.html">casadi::CodeGenerator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dde/code__generator_8hpp_source.html#l00036">code_generator.hpp:36</a></div></div>
<div class="ttc" id="structcasadi_1_1casadi__math_html_aa55eca120fe70408b53fa684d77dbb36"><div class="ttname"><a href="../../d2/d93/structcasadi_1_1casadi__math.html#aa55eca120fe70408b53fa684d77dbb36">casadi::casadi_math::ndeps</a></div><div class="ttdeci">static int ndeps(unsigned char op)</div><div class="ttdoc">Number of dependencies. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d90/calculus_8hpp_source.html#l01368">calculus.hpp:1368</a></div></div>
<div class="ttc" id="namespacecasadi_html_a74a07d00866ce86187cc0f081d340015ab443a65f334c43316aa16dea55e65960"><div class="ttname"><a href="../../d7/d23/namespacecasadi.html#a74a07d00866ce86187cc0f081d340015ab443a65f334c43316aa16dea55e65960">casadi::OT_BOOL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d30/generic__type_8hpp_source.html#l00041">generic_type.hpp:41</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_a9acf5a3ecd44a150f41309b264c54b37"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#a9acf5a3ecd44a150f41309b264c54b37">casadi::SXFunction::constants_</a></div><div class="ttdeci">std::vector&lt; SXElem &gt; constants_</div><div class="ttdoc">The expressions corresponding to each constant. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db0/sx__function_8hpp_source.html#l00211">sx_function.hpp:211</a></div></div>
<div class="ttc" id="structcasadi_1_1ScalarAtomic_html_af5b40aab3870a0c3f1f51ceb5db050a3"><div class="ttname"><a href="../../de/d54/structcasadi_1_1ScalarAtomic.html#af5b40aab3870a0c3f1f51ceb5db050a3">casadi::ScalarAtomic::i2</a></div><div class="ttdeci">int i2</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db0/sx__function_8hpp_source.html#l00047">sx_function.hpp:47</a></div></div>
<div class="ttc" id="namespacecasadi_html_aa335c95e9332e9cdb908ca59f46b44ce"><div class="ttname"><a href="../../d7/d23/namespacecasadi.html#aa335c95e9332e9cdb908ca59f46b44ce">casadi::densify</a></div><div class="ttdeci">void CASADI_PREFIX() densify(const real1_t *x, const int *sp_x, real2_t *y, int tr)</div><div class="ttdoc">Convert sparse to dense. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df9/runtime_8hpp_source.html#l00186">runtime.hpp:186</a></div></div>
<div class="ttc" id="classcasadi_1_1XFunction_html_afba7ecdd21e074f07f151ad5a4ed43dc"><div class="ttname"><a href="../../d7/d72/classcasadi_1_1XFunction.html#afba7ecdd21e074f07f151ad5a4ed43dc">casadi::XFunction&lt; SXFunction, Matrix&lt; SXElem &gt;, SXNode &gt;::outputv_</a></div><div class="ttdeci">std::vector&lt; Matrix&lt; SXElem &gt; &gt; outputv_</div><div class="ttdoc">Outputs of the function (needed for symbolic calculations) </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de5/x__function_8hpp_source.html#l00142">x_function.hpp:142</a></div></div>
<div class="ttc" id="namespacecasadi_html_a28da13ca9291359e511803a448834e2a"><div class="ttname"><a href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">casadi::bvec_t</a></div><div class="ttdeci">unsigned long bvec_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d62/casadi__types_8hpp_source.html#l00089">casadi_types.hpp:89</a></div></div>
<div class="ttc" id="classcasadi_1_1XFunction_html_afaad23ce5b7e07a415f132454da851e9"><div class="ttname"><a href="../../d7/d72/classcasadi_1_1XFunction.html#afaad23ce5b7e07a415f132454da851e9">casadi::XFunction&lt; SXFunction, Matrix&lt; SXElem &gt;, SXNode &gt;::reverse_x</a></div><div class="ttdeci">void reverse_x(const std::vector&lt; Matrix&lt; SXElem &gt; &gt; &amp;arg, const std::vector&lt; Matrix&lt; SXElem &gt; &gt; &amp;res, const std::vector&lt; std::vector&lt; Matrix&lt; SXElem &gt; &gt; &gt; &amp;aseed, std::vector&lt; std::vector&lt; Matrix&lt; SXElem &gt; &gt; &gt; &amp;asens)</div><div class="ttdoc">Create call to (cached) derivative function, reverse mode. </div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_a47550e6a73cc21525a545a6ee97f8188"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#a47550e6a73cc21525a545a6ee97f8188">casadi::SXFunction::print</a></div><div class="ttdeci">virtual void print(std::ostream &amp;stream) const </div><div class="ttdoc">Print the algorithm. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l00138">sx_function.cpp:138</a></div></div>
<div class="ttc" id="singletoncasadi_1_1Matrix_html"><div class="ttname"><a href="../../dd/df2/singletoncasadi_1_1Matrix.html">casadi::Matrix&lt; SXElem &gt;</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_a8655fdaf9d763dec3c5aeba20ef18c9b"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a8655fdaf9d763dec3c5aeba20ef18c9b">casadi::FunctionInternal::sparsity_in</a></div><div class="ttdeci">const Sparsity &amp; sparsity_in(int ind) const </div><div class="ttdoc">Get sparsity of a given input. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4f/function__internal_8hpp_source.html#l00618">function_internal.hpp:618</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_a0d311726652a2934ad4616c0d313ed4e"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#a0d311726652a2934ad4616c0d313ed4e">casadi::SXFunction::is_a</a></div><div class="ttdeci">virtual bool is_a(const std::string &amp;type, bool recursive) const </div><div class="ttdoc">Check if the function is of a particular type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l01413">sx_function.cpp:1413</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_a668a2e7fcd58648e8d5aff499be8e9d8"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a668a2e7fcd58648e8d5aff499be8e9d8">casadi::FunctionInternal::generateFunction</a></div><div class="ttdeci">virtual void generateFunction(CodeGenerator &amp;g, const std::string &amp;fname, bool decl_static) const </div><div class="ttdoc">Generate code the function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db4/function__internal_8cpp_source.html#l01859">function_internal.cpp:1859</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_a53c22e4e0a4ab4c1b834d6c6104c2d1d"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#a53c22e4e0a4ab4c1b834d6c6104c2d1d">casadi::SXFunction::forward_sx</a></div><div class="ttdeci">virtual void forward_sx(const std::vector&lt; SX &gt; &amp;arg, const std::vector&lt; SX &gt; &amp;res, const std::vector&lt; std::vector&lt; SX &gt; &gt; &amp;fseed, std::vector&lt; std::vector&lt; SX &gt; &gt; &amp;fsens, bool always_inline, bool never_inline)</div><div class="ttdoc">Create call to (cached) derivative function, forward mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l01362">sx_function.cpp:1362</a></div></div>
<div class="ttc" id="classcasadi_1_1XFunction_html_a090138048afe2f17dd0453250b3613eb"><div class="ttname"><a href="../../d7/d72/classcasadi_1_1XFunction.html#a090138048afe2f17dd0453250b3613eb">casadi::XFunction&lt; SXFunction, Matrix&lt; SXElem &gt;, SXNode &gt;::forward_x</a></div><div class="ttdeci">void forward_x(const std::vector&lt; Matrix&lt; SXElem &gt; &gt; &amp;arg, const std::vector&lt; Matrix&lt; SXElem &gt; &gt; &amp;res, const std::vector&lt; std::vector&lt; Matrix&lt; SXElem &gt; &gt; &gt; &amp;fseed, std::vector&lt; std::vector&lt; Matrix&lt; SXElem &gt; &gt; &gt; &amp;fsens)</div><div class="ttdoc">Create call to (cached) derivative function, forward mode. </div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_aff3e0736235aa7db6e47284aee89e24d"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#aff3e0736235aa7db6e47284aee89e24d">casadi::SXFunction::just_in_time_sparsity_</a></div><div class="ttdeci">bool just_in_time_sparsity_</div><div class="ttdoc">With just-in-time compilation for the sparsity propagation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db0/sx__function_8hpp_source.html#l00250">sx_function.hpp:250</a></div></div>
<div class="ttc" id="classcasadi_1_1SXNode_html_a2c66c62d3acb5df84a1215a1abd5bb42"><div class="ttname"><a href="../../d7/d8b/classcasadi_1_1SXNode.html#a2c66c62d3acb5df84a1215a1abd5bb42">casadi::SXNode::op</a></div><div class="ttdeci">virtual int op() const =0</div><div class="ttdoc">get the operation </div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_afd0b8a9ae91af6aedbc87d1b588581fd"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#afd0b8a9ae91af6aedbc87d1b588581fd">casadi::SXFunction::SXFunction</a></div><div class="ttdeci">SXFunction(const std::string &amp;name, const std::vector&lt; Matrix&lt; SXElem &gt; &gt; &amp;inputv, const std::vector&lt; Matrix&lt; SXElem &gt; &gt; &amp;outputv)</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l00045">sx_function.cpp:45</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_a9aad1ad97e03b7e446c0419449426323"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a9aad1ad97e03b7e446c0419449426323">casadi::FunctionInternal::verbose_</a></div><div class="ttdeci">bool verbose_</div><div class="ttdoc">Verbose – for debugging purposes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4f/function__internal_8hpp_source.html#l00755">function_internal.hpp:755</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_a19ca11644ec3d0485e36e8d45b1671ca"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#a19ca11644ec3d0485e36e8d45b1671ca">casadi::SXFunction::grad_sx</a></div><div class="ttdeci">virtual SX grad_sx(int iind=0, int oind=0)</div><div class="ttdoc">Gradient expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l01384">sx_function.cpp:1384</a></div></div>
<div class="ttc" id="classcasadi_1_1XFunction_html"><div class="ttname"><a href="../../d7/d72/classcasadi_1_1XFunction.html">casadi::XFunction</a></div><div class="ttdoc">Internal node class for the base class of SXFunction and MXFunction (lacks a public counterpart) The ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de5/x__function_8hpp_source.html#l00047">x_function.hpp:47</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_aff5fde032442f1708b74357109d73287"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#aff5fde032442f1708b74357109d73287">casadi::FunctionInternal::sparsity_out</a></div><div class="ttdeci">const Sparsity &amp; sparsity_out(int ind) const </div><div class="ttdoc">Get sparsity of a given output. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4f/function__internal_8hpp_source.html#l00629">function_internal.hpp:629</a></div></div>
<div class="ttc" id="classcasadi_1_1XFunction_html_afadcdcae1e6a79c094eaaed70dc86530"><div class="ttname"><a href="../../d7/d72/classcasadi_1_1XFunction.html#afadcdcae1e6a79c094eaaed70dc86530">casadi::XFunction&lt; SXFunction, Matrix&lt; SXElem &gt;, SXNode &gt;::inputv_</a></div><div class="ttdeci">std::vector&lt; Matrix&lt; SXElem &gt; &gt; inputv_</div><div class="ttdoc">Inputs of the function (needed for symbolic calculations) </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de5/x__function_8hpp_source.html#l00139">x_function.hpp:139</a></div></div>
<div class="ttc" id="classcasadi_1_1XFunction_html_af4e73ad0f163fd02355960bd7ceb19ad"><div class="ttname"><a href="../../d7/d72/classcasadi_1_1XFunction.html#af4e73ad0f163fd02355960bd7ceb19ad">casadi::XFunction&lt; SXFunction, Matrix&lt; SXElem &gt;, SXNode &gt;::sort_depth_first</a></div><div class="ttdeci">static void sort_depth_first(std::stack&lt; SXNode * &gt; &amp;s, std::vector&lt; SXNode * &gt; &amp;nodes)</div><div class="ttdoc">Topological sorting of the nodes based on Depth-First Search (DFS) </div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_aaea9ce421226535575e3cd17a733caa1"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#aaea9ce421226535575e3cd17a733caa1">casadi::SXFunction::evalFwd</a></div><div class="ttdeci">virtual void evalFwd(const std::vector&lt; std::vector&lt; SX &gt; &gt; &amp;fseed, std::vector&lt; std::vector&lt; SX &gt; &gt; &amp;fsens)</div><div class="ttdoc">Calculate forward mode directional derivatives. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l00579">sx_function.cpp:579</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_a05d77ced432bde2a4b0b858725e84aee"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#a05d77ced432bde2a4b0b858725e84aee">casadi::SXFunction::spAdj</a></div><div class="ttdeci">virtual void spAdj(bvec_t **arg, bvec_t **res, int *iw, bvec_t *w, int mem)</div><div class="ttdoc">Propagate sparsity backwards. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l00796">sx_function.cpp:796</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_ae67b1832e029b5cd7f320737dc2d9ad6"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#ae67b1832e029b5cd7f320737dc2d9ad6">casadi::SXFunction::options_</a></div><div class="ttdeci">static Options options_</div><div class="ttdoc">Options. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db0/sx__function_8hpp_source.html#l00218">sx_function.hpp:218</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_a47fdf0f1c66ad9b45a24347cea290543"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a47fdf0f1c66ad9b45a24347cea290543">casadi::FunctionInternal::name_</a></div><div class="ttdeci">std::string name_</div><div class="ttdoc">Name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4f/function__internal_8hpp_source.html#l00795">function_internal.hpp:795</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_ac60489b2183943b68a652f4f524f848a"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#ac60489b2183943b68a652f4f524f848a">casadi::FunctionInternal::init</a></div><div class="ttdeci">virtual void init(const Dict &amp;opts)</div><div class="ttdoc">Initialize Initialize and make the object ready for setting arguments and evaluation. This method is typically called after setting options but before evaluating. If passed to another class (in the constructor), this class should invoke this function when initialized. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db4/function__internal_8cpp_source.html#l00265">function_internal.cpp:265</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_a36f05161824665768b26bdb18c14c633"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a36f05161824665768b26bdb18c14c633">casadi::FunctionInternal::verbose</a></div><div class="ttdeci">bool verbose() const </div><div class="ttdoc">Verbose mode? </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db4/function__internal_8cpp_source.html#l00573">function_internal.cpp:573</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_a52c4596c5d3f7fc44f721c7bd6bbdf93"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#a52c4596c5d3f7fc44f721c7bd6bbdf93">casadi::SXFunction::generateBody</a></div><div class="ttdeci">virtual void generateBody(CodeGenerator &amp;g) const </div><div class="ttdoc">Generate code for the body of the C function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l00187">sx_function.cpp:187</a></div></div>
<div class="ttc" id="namespacecasadi_html"><div class="ttname"><a href="../../d7/d23/namespacecasadi.html">casadi</a></div><div class="ttdoc">The casadi namespace. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d90/calculus_8hpp_source.html#l00040">calculus.hpp:40</a></div></div>
<div class="ttc" id="classcasadi_1_1SXElem_html_a6403099f0289077069b599d20a409e99"><div class="ttname"><a href="../../d0/d06/classcasadi_1_1SXElem.html#a6403099f0289077069b599d20a409e99">casadi::SXElem::create</a></div><div class="ttdeci">static SXElem create(SXNode *node)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d7e/sx__elem_8cpp_source.html#l00054">sx_elem.cpp:54</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_ae7fb2868317cfb876f34be1ef8943c4a"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#ae7fb2868317cfb876f34be1ef8943c4a">casadi::SXFunction::s_work_</a></div><div class="ttdeci">std::vector&lt; SXElem &gt; s_work_</div><div class="ttdoc">work vector for symbolic calculations (allocated first time) </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db0/sx__function_8hpp_source.html#l00204">sx_function.hpp:204</a></div></div>
<div class="ttc" id="structcasadi_1_1Options_html"><div class="ttname"><a href="../../db/d35/structcasadi_1_1Options.html">casadi::Options</a></div><div class="ttdoc">Options metadata for a class. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d95/options_8hpp_source.html#l00039">options.hpp:39</a></div></div>
<div class="ttc" id="singletoncasadi_1_1Matrix_html_a31af7f3ba2c1b8839872855a4b3cba9d"><div class="ttname"><a href="../../dd/df2/singletoncasadi_1_1Matrix.html#a31af7f3ba2c1b8839872855a4b3cba9d">casadi::Matrix&lt; SXElem &gt;::jac</a></div><div class="ttdeci">static Matrix&lt; SXElem &gt; jac(const Function &amp;f, int iind=0, int oind=0, bool compact=false, bool symmetric=false)</div><div class="ttdoc">Jacobian expression. </div></div>
<div class="ttc" id="structcasadi_1_1ScalarAtomic_html_a45d74bfcc3f9f89069a666bc1d205795"><div class="ttname"><a href="../../de/d54/structcasadi_1_1ScalarAtomic.html#a45d74bfcc3f9f89069a666bc1d205795">casadi::ScalarAtomic::d</a></div><div class="ttdeci">double d</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db0/sx__function_8hpp_source.html#l00046">sx_function.hpp:46</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_a4aa9d894bbe2bd9cab124b928562bf44"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#a4aa9d894bbe2bd9cab124b928562bf44">casadi::SXFunction::hess</a></div><div class="ttdeci">SX hess(int iind=0, int oind=0)</div><div class="ttdoc">Hessian (forward over adjoint) via source code transformation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l00105">sx_function.cpp:105</a></div></div>
<div class="ttc" id="structcasadi_1_1ScalarAtomic_html"><div class="ttname"><a href="../../de/d54/structcasadi_1_1ScalarAtomic.html">casadi::ScalarAtomic</a></div><div class="ttdoc">An atomic operation for the SXElem virtual machine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db0/sx__function_8hpp_source.html#l00042">sx_function.hpp:42</a></div></div>
<div class="ttc" id="namespacecasadi_html_af35251805e44185cb1f079ec41808618a69909c231708b235ccc215d93ca907f8"><div class="ttname"><a href="../../d7/d23/namespacecasadi.html#af35251805e44185cb1f079ec41808618a69909c231708b235ccc215d93ca907f8">casadi::OP_CONST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d90/calculus_8hpp_source.html#l00076">calculus.hpp:76</a></div></div>
<div class="ttc" id="classcasadi_1_1SXNode_html_aa10c4fce3b59be9f164645e91649e2f6"><div class="ttname"><a href="../../d7/d8b/classcasadi_1_1SXNode.html#aa10c4fce3b59be9f164645e91649e2f6">casadi::SXNode::dep</a></div><div class="ttdeci">virtual const SXElem &amp; dep(int i) const </div><div class="ttdoc">get the reference of a child </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d08/sx__node_8cpp_source.html#l00109">sx_node.cpp:109</a></div></div>
<div class="ttc" id="classcasadi_1_1SXNode_html_a86d7c648d7ac88f33ab57a52f9c32294"><div class="ttname"><a href="../../d7/d8b/classcasadi_1_1SXNode.html#a86d7c648d7ac88f33ab57a52f9c32294">casadi::SXNode::to_double</a></div><div class="ttdeci">virtual double to_double() const </div><div class="ttdoc">Get value of a constant node. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d08/sx__node_8cpp_source.html#l00047">sx_node.cpp:47</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_af8f4be7cb60c0f7712d0de12105e8f81"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#af8f4be7cb60c0f7712d0de12105e8f81">casadi::SXFunction::evalAdj</a></div><div class="ttdeci">virtual void evalAdj(const std::vector&lt; std::vector&lt; SX &gt; &gt; &amp;aseed, std::vector&lt; std::vector&lt; SX &gt; &gt; &amp;asens)</div><div class="ttdoc">Calculate reverse mode directional derivatives. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l00670">sx_function.cpp:670</a></div></div>
<div class="ttc" id="classcasadi_1_1SXFunction_html_a50cec56e4ad15efbad268a24243d22ad"><div class="ttname"><a href="../../df/d79/classcasadi_1_1SXFunction.html#a50cec56e4ad15efbad268a24243d22ad">casadi::SXFunction::spFwd</a></div><div class="ttdeci">virtual void spFwd(const bvec_t **arg, bvec_t **res, int *iw, bvec_t *w, int mem)</div><div class="ttdoc">Propagate sparsity forward. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sx__function_8cpp_source.html#l00779">sx_function.cpp:779</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<hr class="footer"/>
Release pointers: <a href="https://github.com/casadi/casadi/tree/40d1934d2cb4eb46565debb8477cb04f4a3e2729/docs/examples/python">extensive python examples</a>, <a href="../../../../tutorials">tutorials</a>, Users Guide (<a href="../../../../users_guide/casadi-users_guide.pdf">pdf</a> | <a href="../../../../users_guide/html">html</a> )
<address class="footer"><small>
Generated for CasADi by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.8</small></address>
<br/>
Official releases: <a href="/3.0.0-rc1">3.0.0-rc1</a> <a href="/2.4.2">2.4.2</a> <a href="/2.3.0">2.3.0</a> <a href="/2.2.0">2.2.0</a> <a href="/2.1.1">2.1.1</a> <a href="/2.0.0">2.0.0</a> <a href="/1.9.0">1.9.0</a> <a href="/1.8.0">1.8.0</a> <a href="/1.7.1">1.7.1</a> <a href="/1.7.0">1.7.0</a> <a href="/1.6.1">1.6.1</a> <a href="/1.6.0">1.6.0</a> <a href="/1.5.0">1.5.0</a> <a href="/1.4.0">1.4.0</a> <a href="/1.3.0">1.3.0</a>
<b
<a href="/">bleeding edge</a>
</body>
</html>

<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>CasADi: kernel_sum.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname"><a href="http://casadi.org"><img src="/api/html/casadi.png" alt="CasADi" height="55px"/></a>&#160;<span>internal API<sup style="font-size:30%">(<a href="../../../html/index.html">switch to public</a>)</sup></span> - <a href="https://github.com/casadi/casadi/tree/40d1934d2cb4eb46565debb8477cb04f4a3e2729" id="40d1934d2cb4eb46565debb8477cb04f4a3e2729" >revision 3.0.0</a></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Function&#160;overview</span></a></li>
      <li><a href="../../da/da4/classcasadi_1_1Function.html"><span>Function</span></a></li>
      <li><a href="../../usergroup0.html"><span>Expression&#160;graphs</span></a></li>
      <li><a href="../../usergroup1.html"><span>Solvers</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_2c2314939267d1c2b8853bb59ef27393.html">casadi</a></li><li class="navelem"><a class="el" href="../../dir_d3f702df5899af83d48ebd5a6235f692.html">core</a></li><li class="navelem"><a class="el" href="../../dir_c8cff01c0844b70ea7cbe6a0191f40f7.html">function</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">kernel_sum.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *    This file is part of CasADi.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *    CasADi -- A symbolic framework for dynamic optimization.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *    Copyright (C) 2010-2014 Joel Andersson, Joris Gillis, Moritz Diehl,</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *                            K.U. Leuven. All rights reserved.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *    Copyright (C) 2011-2014 Greg Horn</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *    CasADi is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *    modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *    License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *    version 3 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *    CasADi is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *    but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *    Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *    You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *    License along with CasADi; if not, write to the Free Software</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;kernel_sum.hpp&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../d8/dcc/namespacestd.html">std</a>;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../d7/d23/namespacecasadi.html">casadi</a> {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="../../dd/db9/classcasadi_1_1KernelSum.html#a06ff45a505ced896cb8c71f0686d9311">   32</a></span>&#160;  KernelSum::KernelSum(<span class="keyword">const</span> std::string&amp; name, <span class="keyword">const</span> <a class="code" href="../../da/da4/classcasadi_1_1Function.html">Function</a>&amp; f,</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                                           <span class="keyword">const</span> std::pair&lt;int, int&gt; &amp; size,</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                                           <span class="keywordtype">double</span> r,</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                                           <span class="keywordtype">int</span> n)</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    : <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html">FunctionInternal</a>(name), f_(f), size_(size), r_(r), n_(n) {</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    casadi_assert(n&gt;=1);</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    casadi_assert_message(n==1, <span class="stringliteral">&quot;Vectorized form of KernelSum2D not yet implemented.&quot;</span>);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    casadi_assert(f.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a7adf68af85281c5d3df49b16ce5dbf81">n_in</a>()&gt;=2);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    casadi_assert(f.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a9a1543987b51da58133f9994afabb102">sparsity_in</a>(0)==<a class="code" href="../../d5/da8/classcasadi_1_1Sparsity.html#a8c70758855f75abad3fcb8defa6a08e9">Sparsity::dense</a>(2, 1));</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    casadi_assert(f.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a9a1543987b51da58133f9994afabb102">sparsity_in</a>(1)==<a class="code" href="../../d5/da8/classcasadi_1_1Sparsity.html#a8c70758855f75abad3fcb8defa6a08e9">Sparsity::dense</a>(1, 1));</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    casadi_assert(f.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a9a1543987b51da58133f9994afabb102">sparsity_in</a>(2)==<a class="code" href="../../d5/da8/classcasadi_1_1Sparsity.html#a8c70758855f75abad3fcb8defa6a08e9">Sparsity::dense</a>(2, 1));</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  }</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="../../dd/db9/classcasadi_1_1KernelSum.html#a62412b6f9bd87f8e7217b7738e463c6d">   48</a></span>&#160;  <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a62412b6f9bd87f8e7217b7738e463c6d">KernelSum::~KernelSum</a>() {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  }</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="../../dd/db9/classcasadi_1_1KernelSum.html#a037f0cdd633aedc2fbc9d27d954134c3">   51</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a037f0cdd633aedc2fbc9d27d954134c3">KernelSum::init</a>(<span class="keyword">const</span> <a class="code" href="../../d7/d23/namespacecasadi.html#ac0b357d13f0080474277728f87d771c2">Dict</a>&amp; opts) {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// Call the initialization method of the base class</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#ac60489b2183943b68a652f4f524f848a">FunctionInternal::init</a>(opts);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordtype">int</span> num_out = <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a75899f1caaad28b6dc71c4a3a7c31bb7">n_out</a>();</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a0309eef2d48887c79ebec12825f17f9e">step_out_</a>.resize(num_out, 0);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;num_out; ++i) {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a0309eef2d48887c79ebec12825f17f9e">step_out_</a>[i] = <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#ae43a9b44ba52f3ddba6cfbc25f7d6218">nnz_out</a>(i);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    }</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="comment">// Allocate some space to evaluate each function to.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#ae02d718d5b112aaefbd9f9a02f43bc5e">nnz_out_</a> = 0;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;num_out; ++i) {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#ae02d718d5b112aaefbd9f9a02f43bc5e">nnz_out_</a>+= <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a0309eef2d48887c79ebec12825f17f9e">step_out_</a>[i];</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    }</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#acd701154519bf9f8d787a936ef95246c">alloc_w</a>(<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a3e4c7bfd2ea071d5510081f258c82601">sz_w</a>() + <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#ae02d718d5b112aaefbd9f9a02f43bc5e">nnz_out_</a>+3);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a06082362fcb23031a134b4d4e6471c11">alloc_iw</a>(<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a9508670302dc4a6db03c5dd5ff61ff17">sz_iw</a>());</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a4e50c40106105c8d58aa16f6e9aa564c">alloc_arg</a>(2*<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a2dffbeee734a523a412be39d48cff9ff">sz_arg</a>());</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a2c2f3f5e118cc1283f6f1537c9932bad">alloc_res</a>(2*<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#aadcb24c10ee3aff3cedae8426ad9b8b9">sz_res</a>());</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  }</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="../../d7/d23/namespacecasadi.html#a14218f1c467799b937f3e272fceadbf4">   75</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a> <a class="code" href="../../d7/d23/namespacecasadi.html#a14218f1c467799b937f3e272fceadbf4">Orring</a>(<a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a> x, <a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a> y) { <span class="keywordflow">return</span> x | y; }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="../../dd/db9/classcasadi_1_1KernelSum.html#a22279fbc14acae7f185b949364f647d3">   77</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a22279fbc14acae7f185b949364f647d3">KernelSum::spFwd</a>(<span class="keyword">const</span> <a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a>** arg, <a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a>** res, <span class="keywordtype">int</span>* iw, <a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a>* w, <span class="keywordtype">int</span> mem) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// First input is non-differentiable</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordtype">int</span> num_in = <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a7adf68af85281c5d3df49b16ce5dbf81">n_in</a>(), num_out = <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a75899f1caaad28b6dc71c4a3a7c31bb7">n_out</a>();</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// Clear the accumulators</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a>** sum = res;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0;k&lt;num_out;++k) {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <span class="keywordflow">if</span> (sum[k]!=0) std::fill(sum[k], sum[k]+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a0309eef2d48887c79ebec12825f17f9e">step_out_</a>[k], 0);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a>** arg1 = arg+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a2dffbeee734a523a412be39d48cff9ff">sz_arg</a>();</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a>** res1 = res+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#aadcb24c10ee3aff3cedae8426ad9b8b9">sz_res</a>();</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// Everything except the first argument can be passed as-is to f</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    std::copy(arg+1, arg+num_in, arg1+2);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">// The first argument will be the pixel coordinates p_i</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a>* coord = w+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a3e4c7bfd2ea071d5510081f258c82601">sz_w</a>()+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#ae02d718d5b112aaefbd9f9a02f43bc5e">nnz_out_</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    arg1[0] = coord;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// The second argument will be the pixel value v_i</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a>* value = w+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a3e4c7bfd2ea071d5510081f258c82601">sz_w</a>()+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#ae02d718d5b112aaefbd9f9a02f43bc5e">nnz_out_</a>+2;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    arg1[1] = value;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">bvec_t</a>* temp_res = w+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a3e4c7bfd2ea071d5510081f258c82601">sz_w</a>();</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// Clear the temp_res storage space</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">if</span> (temp_res!=0) std::fill(temp_res, temp_res+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#ae02d718d5b112aaefbd9f9a02f43bc5e">nnz_out_</a>, 0);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">// Set the function outputs</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;num_out; ++j) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="comment">// Make the function outputs end up in temp_res</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      res1[j] = (res[j]==0)? 0: temp_res;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      temp_res+= <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a0309eef2d48887c79ebec12825f17f9e">step_out_</a>[j];</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">// Set the coordinate input</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    coord[0] = 0;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    coord[1] = 0;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// Set the pixel value input</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    value[0] = 0;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// Evaluate the function</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>(arg1, res1, iw, w, 0);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// Sum results from temporary storage to accumulator</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0;k&lt;num_out;++k) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="keywordflow">if</span> (res1[k] &amp;&amp; sum[k])</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        std::transform(res1[k], res1[k]+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a0309eef2d48887c79ebec12825f17f9e">step_out_</a>[k], sum[k], sum[k], &amp;<a class="code" href="../../d7/d23/namespacecasadi.html#a14218f1c467799b937f3e272fceadbf4">Orring</a>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#afc42c02d933fb0b9883d4356578af8d2">KernelSum::</a></div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="../../dd/db9/classcasadi_1_1KernelSum.html#afc42c02d933fb0b9883d4356578af8d2">  131</a></span>&#160;<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#afc42c02d933fb0b9883d4356578af8d2">  eval</a>(<span class="keywordtype">void</span>* mem, <span class="keyword">const</span> <span class="keywordtype">double</span>** arg, <span class="keywordtype">double</span>** res, <span class="keywordtype">int</span>* iw, <span class="keywordtype">double</span>* w)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordtype">int</span> num_in = <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a7adf68af85281c5d3df49b16ce5dbf81">n_in</a>(), num_out = <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a75899f1caaad28b6dc71c4a3a7c31bb7">n_out</a>();</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span>* V = arg[0];</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span>* X = arg[1];</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// Clear the accumulators</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordtype">double</span>** sum = res;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0;k&lt;num_out;++k) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="keywordflow">if</span> (sum[k]!=0) std::fill(sum[k], sum[k]+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a0309eef2d48887c79ebec12825f17f9e">step_out_</a>[k], 0);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span>** arg1 = arg+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a2dffbeee734a523a412be39d48cff9ff">sz_arg</a>();</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordtype">double</span>** res1 = res+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#aadcb24c10ee3aff3cedae8426ad9b8b9">sz_res</a>();</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// Everything except the first argument can be passed as-is to f</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    std::copy(arg+1, arg+num_in, arg1+2);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">// The first argument will be the pixel coordinates p_i</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordtype">double</span>* coord = w+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a3e4c7bfd2ea071d5510081f258c82601">sz_w</a>()+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#ae02d718d5b112aaefbd9f9a02f43bc5e">nnz_out_</a>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    arg1[0] = coord;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// The second argument will be the pixel value v_i</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordtype">double</span>* value = w+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a3e4c7bfd2ea071d5510081f258c82601">sz_w</a>()+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#ae02d718d5b112aaefbd9f9a02f43bc5e">nnz_out_</a>+2;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    arg1[1] = value;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordtype">double</span>* temp_res = w+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a3e4c7bfd2ea071d5510081f258c82601">sz_w</a>();</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">// Clear the temp_res storage space</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">if</span> (temp_res!=0) std::fill(temp_res, temp_res+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#ae02d718d5b112aaefbd9f9a02f43bc5e">nnz_out_</a>, 0);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">// Set the function outputs</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;num_out; ++j) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="comment">// Make the function outputs end up in temp_res</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      res1[j] = (res[j]==0)? 0: temp_res;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      temp_res+= <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a0309eef2d48887c79ebec12825f17f9e">step_out_</a>[j];</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">//     ---&gt; j,v</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">//   |</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">//   v  i,u</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordtype">int</span> u = round(X[0]);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordtype">int</span> v = round(X[1]);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = -round(<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a40a9e9d2b41e52f9847a433a13d8734f">r_</a>);i&lt;= round(<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a40a9e9d2b41e52f9847a433a13d8734f">r_</a>);++i) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = -round(<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a40a9e9d2b41e52f9847a433a13d8734f">r_</a>);j&lt;= round(<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a40a9e9d2b41e52f9847a433a13d8734f">r_</a>);++j) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="comment">// Set the coordinate input</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        coord[0] = u+i;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        coord[1] = v+j;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordtype">int</span> I = min(max(u+i, 0), <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a7dd53b5d16099a30d3ee571de4d69440">size_</a>.first-1);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordtype">int</span> J = min(max(v+j, 0), <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a7dd53b5d16099a30d3ee571de4d69440">size_</a>.second-1);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="comment">// Set the pixel value input</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        value[0] = V[I+J*<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a7dd53b5d16099a30d3ee571de4d69440">size_</a>.first];</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="comment">// Evaluate the function</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>(arg1, res1, iw, w, 0);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="comment">// Sum results from temporary storage to accumulator</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0;k&lt;num_out;++k) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;          <span class="keywordflow">if</span> (res1[k] &amp;&amp; sum[k])</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            std::transform(res1[k], res1[k]+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a0309eef2d48887c79ebec12825f17f9e">step_out_</a>[k], sum[k], sum[k], std::plus&lt;double&gt;());</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <a class="code" href="../../da/da4/classcasadi_1_1Function.html">Function</a> <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a5a54fe50de01f69afb83483ba8234fb8">KernelSum</a></div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="../../dd/db9/classcasadi_1_1KernelSum.html#a5a54fe50de01f69afb83483ba8234fb8">  202</a></span>&#160;<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a5a54fe50de01f69afb83483ba8234fb8">  ::get_forward</a>(<span class="keyword">const</span> std::string&amp; name, <span class="keywordtype">int</span> nfwd, <a class="code" href="../../d7/d23/namespacecasadi.html#ac0b357d13f0080474277728f87d771c2">Dict</a>&amp; opts) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">/* Write KernelSum2D in linear form:</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">    *  </span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">    *    S = F(V, X)  = sum_i  f ( P_i, v_i, X)</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">    *  With a slight abuse of notation, we have:</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">    *    S_dot = sum_i  f_forward ( P_i, v_i, X, X_dot)</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">    *  The forward mode of KernelSum is another KernelSum.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">    *  There is a bit of houskeeping in selecting the correct inputs/outputs.</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">/* More exactly, the forward mode of the primitive is</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">    * fd( P_i, v_i, X, S, P_i_dot, v_i_dot, X_dot)</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">    * we need to bring this in the form </span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">    *     f_forward ( P_i, v_i, X, X_dot)</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="../../da/da4/classcasadi_1_1Function.html">Function</a> fd = f_.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#afc78365acb92e918505eaffa62145166">forward</a>(nfwd);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    vector&lt;MX&gt; f_inputs(f_.n_in());</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;f_inputs.size(); ++i) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      f_inputs[i] = f_-&gt;FunctionInternal::mx_in(i); <span class="comment">// NOTE(@jaeandersson): Flawed design</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    std::vector&lt;MX&gt; f_outputs  = f_.mx_out();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    std::vector&lt;MX&gt; fd_inputs   = f_inputs;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// Create nodes for the nominal output (S)</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    std::vector&lt;MX&gt; f_call_out  = f_(f_inputs);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    fd_inputs.insert(fd_inputs.end(), f_call_out.begin(), f_call_out.end());</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;nfwd;++i) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="comment">// Pad with blanks: we don&#39;t consider P_i_dot and v_i_dot</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      fd_inputs.push_back(<a class="code" href="../../de/d57/classcasadi_1_1MX.html">MX</a>());</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      fd_inputs.push_back(<a class="code" href="../../de/d57/classcasadi_1_1MX.html">MX</a>());</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      vector&lt;MX&gt; inputs(f_.n_in());</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;inputs.size(); ++i) {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        inputs[i] = f_-&gt;FunctionInternal::mx_in(i); <span class="comment">// NOTE(@jaeandersson): Flawed design</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      fd_inputs.insert(fd_inputs.end(), inputs.begin()+2, inputs.end());</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      f_inputs.insert(f_inputs.end(), inputs.begin()+2, inputs.end());</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="../../da/da4/classcasadi_1_1Function.html">Function</a> f_forward(<span class="stringliteral">&quot;f&quot;</span>, f_inputs, fd(fd_inputs));</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="../../da/da4/classcasadi_1_1Function.html">Function</a> ret = f_forward.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a4e3cf758fb84c9755670bc3689bf68cd">kernel_sum</a>(name, size_, r_, n_);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="comment">/* Furthermore, we need to return something of signature</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">    *  der(V,X,S,V_dot,X_dot)</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    std::vector&lt;MX&gt; der_inputs = mx_in();</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    std::vector&lt;MX&gt; ret_inputs = der_inputs;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    std::vector&lt;MX&gt; outputs = mx_out();</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    der_inputs.insert(der_inputs.end(), outputs.begin(), outputs.end());</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;nfwd;++i) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="comment">// Construct dummy matrix for capturing the V_dot argument.</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      der_inputs.push_back(<a class="code" href="../../dc/df3/classcasadi_1_1GenericMatrix.html#aef7e7817a3072ed661a3274e86fac531">MX::sym</a>(<span class="stringliteral">&quot;x&quot;</span>, <a class="code" href="../../d5/da8/classcasadi_1_1Sparsity.html">Sparsity</a>(size_) ));</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      std::vector&lt;MX&gt; inputs = mx_in();</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      der_inputs.insert(der_inputs.end(), inputs.begin()+1, inputs.end());</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      ret_inputs.insert(ret_inputs.end(), inputs.begin()+1, inputs.end());</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="../../da/da4/classcasadi_1_1Function.html">Function</a> der(<span class="stringliteral">&quot;f&quot;</span>, der_inputs, ret(ret_inputs), opts);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">return</span> der;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <a class="code" href="../../da/da4/classcasadi_1_1Function.html">Function</a> <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#ac5b905d68a7ed2bdd0c9ecf331adac07">KernelSum</a></div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="../../dd/db9/classcasadi_1_1KernelSum.html#ac5b905d68a7ed2bdd0c9ecf331adac07">  281</a></span>&#160;<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#ac5b905d68a7ed2bdd0c9ecf331adac07">  ::get_reverse</a>(<span class="keyword">const</span> std::string&amp; name, <span class="keywordtype">int</span> nadj, <a class="code" href="../../d7/d23/namespacecasadi.html#ac0b357d13f0080474277728f87d771c2">Dict</a>&amp; opts) {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">/* Write KernelSum2D in linear form:</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">    *  </span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">    *    S = F(V, X)  = sum_i  f ( P_i, v_i, X)</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">    *  With a slight abuse of notation, we have:</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">    *    X_bar = sum_i  f_reverse ( P_i, v_i, X, S_bar)</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">    *  The reverse mode of KernelSum is another KernelSum.</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">    *  There is a bit of houskeeping in selecting the correct inputs/outputs.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordtype">int</span> num_in = f_.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a7adf68af85281c5d3df49b16ce5dbf81">n_in</a>(), num_out = f_.n_out();</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="comment">/* More exactly, the reverse mode of the primitive is</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">    * fd( P_i, v_i, X, S, S_bar) -&gt; P_i_bar, v_i_bar, X_bar</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">    * we need to bring this in the form </span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">    *     f_reverse ( P_i, v_i, X, S_bar) -&gt; X_bar</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="../../da/da4/classcasadi_1_1Function.html">Function</a> fd = f_.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a752108160bd0472701a966d9738d1e7e">reverse</a>(nadj);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">// NOTE(@jaeandersson): Flawed design</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    std::vector&lt;MX&gt; f_inputs   = f_-&gt;FunctionInternal::mx_in();</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    std::vector&lt;MX&gt; f_outputs  = f_.mx_out();</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    std::vector&lt;MX&gt; fd_inputs   = f_inputs;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="comment">// Create nodes for the nominal output (S)</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    std::vector&lt;MX&gt; f_call_out  = f_(f_inputs);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    fd_inputs.insert(fd_inputs.end(), f_call_out.begin(), f_call_out.end());</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;nadj;++i) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      std::vector&lt;MX&gt; outputs   = f_.mx_out();</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      fd_inputs.insert(fd_inputs.end(), outputs.begin(), outputs.end());</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      f_inputs.insert(f_inputs.end(), outputs.begin(), outputs.end());</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    std::vector&lt;MX&gt; fd_outputs = fd(fd_inputs);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// Drop the outputs we do not need: P_i_bar, v_i_bar</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    f_outputs.clear();</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordtype">int</span> offset = 2;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;nadj;++i) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      f_outputs.insert(f_outputs.end(), fd_outputs.begin()+offset,</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        fd_outputs.begin()+offset+f_.n_in()-2);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      offset+= f_.n_in();</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="../../da/da4/classcasadi_1_1Function.html">Function</a> f_reverse(<span class="stringliteral">&quot;f&quot;</span>, f_inputs, f_outputs);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="../../da/da4/classcasadi_1_1Function.html">Function</a> kn = f_reverse.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a4e3cf758fb84c9755670bc3689bf68cd">kernel_sum</a>(name, size_, r_, n_);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">/* Furthermore, we need to return something of signature</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">    *  der(V,X,S,S_bar) -&gt; V_bar, X_bar</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    std::vector&lt;MX&gt; ret_inputs = mx_in();</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    std::vector&lt;MX&gt; kn_inputs = ret_inputs;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;num_out;++i) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="comment">// Dummy symbols for the nominal outputs (S)</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <a class="code" href="../../de/d57/classcasadi_1_1MX.html">MX</a> output = <a class="code" href="../../dc/df3/classcasadi_1_1GenericMatrix.html#aef7e7817a3072ed661a3274e86fac531">MX::sym</a>(<span class="stringliteral">&quot;x&quot;</span>, <a class="code" href="../../d5/da8/classcasadi_1_1Sparsity.html">Sparsity</a>(f_.sparsity_out(i).size()));</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      ret_inputs.push_back(output);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;nadj;++i) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      std::vector&lt;MX&gt; outputs = mx_out();</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      ret_inputs.insert(ret_inputs.end(), outputs.begin(), outputs.end());</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      kn_inputs.insert(kn_inputs.end(), outputs.begin(), outputs.end());</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    std::vector&lt;MX&gt; kn_outputs = kn(kn_inputs);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    std::vector&lt;MX&gt; ret_outputs;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    offset = 0;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;nadj;++i) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <span class="comment">// Use sparse zero as V_bar output</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      ret_outputs.push_back(<a class="code" href="../../dc/df3/classcasadi_1_1GenericMatrix.html#a8474a2a70e32d853e3b7b71f024c3c27">MX::zeros</a>(<a class="code" href="../../d5/da8/classcasadi_1_1Sparsity.html">Sparsity</a>(size_)));</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      ret_outputs.insert(ret_outputs.end(), kn_outputs.begin()+offset,</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        kn_outputs.begin()+offset+num_in-2);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      offset+= num_in-2;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="../../da/da4/classcasadi_1_1Function.html">Function</a> ret(name, ret_inputs, ret_outputs, opts);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno"><a class="line" href="../../dd/db9/classcasadi_1_1KernelSum.html#a0bb90f44e2ee43fe28406937107a17b4">  375</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a0bb90f44e2ee43fe28406937107a17b4">KernelSum::generateDeclarations</a>(<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html">CodeGenerator</a>&amp; g)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>-&gt;<a class="code" href="../../d2/dab/classcasadi_1_1FunctionInternal.html#ac065e056092f9c5fa80ecc85df04bc6c">addDependency</a>(g);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno"><a class="line" href="../../dd/db9/classcasadi_1_1KernelSum.html#a9bc1e111bdd670c1ccdedea44727e3b2">  379</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a9bc1e111bdd670c1ccdedea44727e3b2">KernelSum::generateBody</a>(<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html">CodeGenerator</a>&amp; g)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#a6e2b1aa6539ab215989bd0d879064ba1">addAuxiliary</a>(<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#acb9e5d52881b89783af1aed9c128af84a31d6fc50d6ad2b1d8e6df93f38ee840b">CodeGenerator::AUX_COPY</a>);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#a6e2b1aa6539ab215989bd0d879064ba1">addAuxiliary</a>(<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#acb9e5d52881b89783af1aed9c128af84a29a0de1917bd78e14ff58583d544c740">CodeGenerator::AUX_FILL</a>);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#a6e2b1aa6539ab215989bd0d879064ba1">addAuxiliary</a>(<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#acb9e5d52881b89783af1aed9c128af84a48fd81e67b7209a0913b29e81eadd2ed">CodeGenerator::AUX_AXPY</a>);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordtype">int</span> num_in = <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a7adf68af85281c5d3df49b16ce5dbf81">n_in</a>(), num_out = <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a75899f1caaad28b6dc71c4a3a7c31bb7">n_out</a>();</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  const real_t* V = arg[0];&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  const real_t* X = arg[1];&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="comment">// Clear the accumulators</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  real_t** sum = res;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0;k&lt;num_out;++k) {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  if (sum[&quot;</span> &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot;]!=0) fill(sum[&quot;</span> &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot;], &quot;</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        &lt;&lt; <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a0309eef2d48887c79ebec12825f17f9e">step_out_</a>[k] &lt;&lt; <span class="stringliteral">&quot;, 0);&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  const real_t** arg1 = arg+&quot;</span> &lt;&lt; <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a2dffbeee734a523a412be39d48cff9ff">sz_arg</a>() &lt;&lt; <span class="stringliteral">&quot;;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  real_t** res1 = res+&quot;</span> &lt;&lt; <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#aadcb24c10ee3aff3cedae8426ad9b8b9">sz_res</a>() &lt;&lt; <span class="stringliteral">&quot;;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment">// Everything except the first argument can be passed as-is to f</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  int ii;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  for(ii=0;ii&lt;&quot;</span> &lt;&lt; num_in -1&lt;&lt; <span class="stringliteral">&quot;;++ii) arg1[2+ii] = arg[1+ii];&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">// The first argument will be the pixel coordinates p_i</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  real_t* coord = w+&quot;</span> &lt;&lt; <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a3e4c7bfd2ea071d5510081f258c82601">sz_w</a>()+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#ae02d718d5b112aaefbd9f9a02f43bc5e">nnz_out_</a> &lt;&lt; <span class="stringliteral">&quot;;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  arg1[0] = coord;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="comment">// The second argument will be the pixel value v_i</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  real_t* value = w+&quot;</span> &lt;&lt; <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a3e4c7bfd2ea071d5510081f258c82601">sz_w</a>()+<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#ae02d718d5b112aaefbd9f9a02f43bc5e">nnz_out_</a>+2 &lt;&lt; <span class="stringliteral">&quot;;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  arg1[1] = value;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  real_t* temp_res = w+&quot;</span> &lt;&lt; <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a3e4c7bfd2ea071d5510081f258c82601">sz_w</a>() &lt;&lt; <span class="stringliteral">&quot;;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">// Clear the temp_res storage space</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  if (temp_res!=0) fill(temp_res, &quot;</span> &lt;&lt; <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#ae02d718d5b112aaefbd9f9a02f43bc5e">nnz_out_</a> &lt;&lt; <span class="stringliteral">&quot;, 0);&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">// Set the function outputs</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordtype">int</span> offset = 0;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;num_out; ++j) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="comment">// Make the function outputs end up in temp_res</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  res1[&quot;</span> &lt;&lt; j &lt;&lt; <span class="stringliteral">&quot;] = (res[&quot;</span> &lt;&lt; j &lt;&lt; <span class="stringliteral">&quot;]==0)? 0: temp_res + &quot;</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        &lt;&lt; offset &lt;&lt; <span class="stringliteral">&quot;;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      offset+= <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a0309eef2d48887c79ebec12825f17f9e">step_out_</a>[j];</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="comment">//     ---&gt; j,v</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="comment">//   |</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment">//   v  i,u</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  int u = round(X[0]);&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  int v = round(X[1]);&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  int i,j;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  for (i = -&quot;</span> &lt;&lt; round(<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a40a9e9d2b41e52f9847a433a13d8734f">r_</a>) &lt;&lt;<span class="stringliteral">&quot;;i&lt;=&quot;</span> &lt;&lt;  round(<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a40a9e9d2b41e52f9847a433a13d8734f">r_</a>) &lt;&lt; <span class="stringliteral">&quot;;++i) {&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;    for (j = -&quot;</span> &lt;&lt; round(<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a40a9e9d2b41e52f9847a433a13d8734f">r_</a>) &lt;&lt;<span class="stringliteral">&quot;;j&lt;= &quot;</span> &lt;&lt; round(<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a40a9e9d2b41e52f9847a433a13d8734f">r_</a>) &lt;&lt;<span class="stringliteral">&quot;;++j) {&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">// Set the coordinate input</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;      int I = u+i;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;      int J = v+j;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;      coord[0] = I;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;      coord[1] = J;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;      if (I&lt;0) I=0;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;      if (J&lt;0) J=0;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;      if (I&gt;&quot;</span> &lt;&lt; <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a7dd53b5d16099a30d3ee571de4d69440">size_</a>.first-1 &lt;&lt; <span class="stringliteral">&quot;) I=&quot;</span> &lt;&lt; <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a7dd53b5d16099a30d3ee571de4d69440">size_</a>.first-1 &lt;&lt; <span class="stringliteral">&quot;;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;      if (J&gt;&quot;</span> &lt;&lt; <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a7dd53b5d16099a30d3ee571de4d69440">size_</a>.second-1 &lt;&lt; <span class="stringliteral">&quot;) J=&quot;</span> &lt;&lt; <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a7dd53b5d16099a30d3ee571de4d69440">size_</a>.second-1 &lt;&lt; <span class="stringliteral">&quot;;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="comment">// Set the pixel value input</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;      value[0] = V[I+J*&quot;</span> &lt;&lt; <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a7dd53b5d16099a30d3ee571de4d69440">size_</a>.first &lt;&lt; <span class="stringliteral">&quot;];&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">// Evaluate the function</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;      if (&quot;</span> &lt;&lt; g(<a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>, <span class="stringliteral">&quot;arg1&quot;</span>, <span class="stringliteral">&quot;res1&quot;</span>, <span class="stringliteral">&quot;iw&quot;</span>, <span class="stringliteral">&quot;w&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;) return 1;&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="comment">// Sum results from temporary storage to accumulator</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;num_out; ++k) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;      if (res1[&quot;</span> &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot;] &amp;&amp; sum[&quot;</span> &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot;])&quot;</span> &lt;&lt; endl</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;       axpy(&quot;</span> &lt;&lt; <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a0309eef2d48887c79ebec12825f17f9e">step_out_</a>[k] &lt;&lt; <span class="stringliteral">&quot;,1,&quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                          <span class="stringliteral">&quot;res1[&quot;</span>&lt;&lt; k &lt;&lt; <span class="stringliteral">&quot;],sum[&quot;</span> &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot;]);&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;    }&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    g.<a class="code" href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">body</a> &lt;&lt; <span class="stringliteral">&quot;  }&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div>
<div class="line"><a name="l00465"></a><span class="lineno"><a class="line" href="../../dd/db9/classcasadi_1_1KernelSum.html#a924bbd651bc9a1e215b284efbda6a5ec">  465</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a924bbd651bc9a1e215b284efbda6a5ec">KernelSum::print</a>(ostream &amp;stream)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    stream &lt;&lt; <span class="stringliteral">&quot;KernelSum2D(&quot;</span> &lt;&lt; <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">f_</a>.<a class="code" href="../../da/da4/classcasadi_1_1Function.html#a80de4df1ef234cf7e28c8755121ffb79">name</a>() &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; <a class="code" href="../../dd/db9/classcasadi_1_1KernelSum.html#a10e368f08e885e4e77faab19f78d2248">n_</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;} <span class="comment">// namespace casadi</span></div>
<div class="ttc" id="classcasadi_1_1KernelSum_html_a9bc1e111bdd670c1ccdedea44727e3b2"><div class="ttname"><a href="../../dd/db9/classcasadi_1_1KernelSum.html#a9bc1e111bdd670c1ccdedea44727e3b2">casadi::KernelSum::generateBody</a></div><div class="ttdeci">virtual void generateBody(CodeGenerator &amp;g) const </div><div class="ttdoc">Generate code for the body of the C function. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d9c/kernel__sum_8cpp_source.html#l00379">kernel_sum.cpp:379</a></div></div>
<div class="ttc" id="classcasadi_1_1Function_html_a75899f1caaad28b6dc71c4a3a7c31bb7"><div class="ttname"><a href="../../da/da4/classcasadi_1_1Function.html#a75899f1caaad28b6dc71c4a3a7c31bb7">casadi::Function::n_out</a></div><div class="ttdeci">int n_out() const </div><div class="ttdoc">Get the number of function outputs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/function_8cpp_source.html#l00512">function.cpp:512</a></div></div>
<div class="ttc" id="classcasadi_1_1KernelSum_html_add6e58e491f4d9f3bb48e763d638f156"><div class="ttname"><a href="../../dd/db9/classcasadi_1_1KernelSum.html#add6e58e491f4d9f3bb48e763d638f156">casadi::KernelSum::f_</a></div><div class="ttdeci">Function f_</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de7/kernel__sum_8hpp_source.html#l00107">kernel_sum.hpp:107</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_a06082362fcb23031a134b4d4e6471c11"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a06082362fcb23031a134b4d4e6471c11">casadi::FunctionInternal::alloc_iw</a></div><div class="ttdeci">void alloc_iw(size_t sz_iw, bool persistent=false)</div><div class="ttdoc">Ensure required length of iw field. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db4/function__internal_8cpp_source.html#l02276">function_internal.cpp:2276</a></div></div>
<div class="ttc" id="classcasadi_1_1Function_html_ae43a9b44ba52f3ddba6cfbc25f7d6218"><div class="ttname"><a href="../../da/da4/classcasadi_1_1Function.html#ae43a9b44ba52f3ddba6cfbc25f7d6218">casadi::Function::nnz_out</a></div><div class="ttdeci">int nnz_out() const </div><div class="ttdoc">Get of number of output nonzeros For a particular output or for all for all of the outputs...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/function_8cpp_source.html#l00544">function.cpp:544</a></div></div>
<div class="ttc" id="classcasadi_1_1Function_html"><div class="ttname"><a href="../../da/da4/classcasadi_1_1Function.html">casadi::Function</a></div><div class="ttdoc">General function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7c/function_8hpp_source.html#l00103">function.hpp:103</a></div></div>
<div class="ttc" id="classcasadi_1_1KernelSum_html_a10e368f08e885e4e77faab19f78d2248"><div class="ttname"><a href="../../dd/db9/classcasadi_1_1KernelSum.html#a10e368f08e885e4e77faab19f78d2248">casadi::KernelSum::n_</a></div><div class="ttdeci">int n_</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de7/kernel__sum_8hpp_source.html#l00113">kernel_sum.hpp:113</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_a4e50c40106105c8d58aa16f6e9aa564c"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a4e50c40106105c8d58aa16f6e9aa564c">casadi::FunctionInternal::alloc_arg</a></div><div class="ttdeci">void alloc_arg(size_t sz_arg, bool persistent=false)</div><div class="ttdoc">Ensure required length of arg field. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db4/function__internal_8cpp_source.html#l02260">function_internal.cpp:2260</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_acd701154519bf9f8d787a936ef95246c"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#acd701154519bf9f8d787a936ef95246c">casadi::FunctionInternal::alloc_w</a></div><div class="ttdeci">void alloc_w(size_t sz_w, bool persistent=false)</div><div class="ttdoc">Ensure required length of w field. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db4/function__internal_8cpp_source.html#l02284">function_internal.cpp:2284</a></div></div>
<div class="ttc" id="classcasadi_1_1Function_html_afc78365acb92e918505eaffa62145166"><div class="ttname"><a href="../../da/da4/classcasadi_1_1Function.html#afc78365acb92e918505eaffa62145166">casadi::Function::forward</a></div><div class="ttdeci">void forward(const std::vector&lt; MX &gt; &amp;arg, const std::vector&lt; MX &gt; &amp;res, const std::vector&lt; std::vector&lt; MX &gt; &gt; &amp;fseed, std::vector&lt; std::vector&lt; MX &gt; &gt; &amp;output_fsens, bool always_inline=false, bool never_inline=false)</div><div class="ttdoc">Create call to (cached) derivative function, forward mode. </div></div>
<div class="ttc" id="classcasadi_1_1KernelSum_html_a22279fbc14acae7f185b949364f647d3"><div class="ttname"><a href="../../dd/db9/classcasadi_1_1KernelSum.html#a22279fbc14acae7f185b949364f647d3">casadi::KernelSum::spFwd</a></div><div class="ttdeci">virtual void spFwd(const bvec_t **arg, bvec_t **res, int *iw, bvec_t *w, int mem)</div><div class="ttdoc">Propagate sparsity forward. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d9c/kernel__sum_8cpp_source.html#l00077">kernel_sum.cpp:77</a></div></div>
<div class="ttc" id="classcasadi_1_1Function_html_a7adf68af85281c5d3df49b16ce5dbf81"><div class="ttname"><a href="../../da/da4/classcasadi_1_1Function.html#a7adf68af85281c5d3df49b16ce5dbf81">casadi::Function::n_in</a></div><div class="ttdeci">int n_in() const </div><div class="ttdoc">Get the number of function inputs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/function_8cpp_source.html#l00508">function.cpp:508</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_ac065e056092f9c5fa80ecc85df04bc6c"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#ac065e056092f9c5fa80ecc85df04bc6c">casadi::FunctionInternal::addDependency</a></div><div class="ttdeci">virtual void addDependency(CodeGenerator &amp;g) const </div><div class="ttdoc">Add a dependent function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db4/function__internal_8cpp_source.html#l02111">function_internal.cpp:2111</a></div></div>
<div class="ttc" id="classcasadi_1_1CodeGenerator_html_ad059828b805503016d81b97e53336f06"><div class="ttname"><a href="../../d1/da2/classcasadi_1_1CodeGenerator.html#ad059828b805503016d81b97e53336f06">casadi::CodeGenerator::body</a></div><div class="ttdeci">std::stringstream body</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dde/code__generator_8hpp_source.html#l00225">code_generator.hpp:225</a></div></div>
<div class="ttc" id="classcasadi_1_1KernelSum_html_a40a9e9d2b41e52f9847a433a13d8734f"><div class="ttname"><a href="../../dd/db9/classcasadi_1_1KernelSum.html#a40a9e9d2b41e52f9847a433a13d8734f">casadi::KernelSum::r_</a></div><div class="ttdeci">double r_</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de7/kernel__sum_8hpp_source.html#l00111">kernel_sum.hpp:111</a></div></div>
<div class="ttc" id="classcasadi_1_1GenericMatrix_html_a8474a2a70e32d853e3b7b71f024c3c27"><div class="ttname"><a href="../../dc/df3/classcasadi_1_1GenericMatrix.html#a8474a2a70e32d853e3b7b71f024c3c27">casadi::GenericMatrix&lt; MX &gt;::zeros</a></div><div class="ttdeci">static MX zeros(int nrow=1, int ncol=1)</div><div class="ttdoc">Create a dense matrix or a matrix with specified sparsity with all entries zero. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d90/generic__matrix_8hpp_source.html#l00651">generic_matrix.hpp:651</a></div></div>
<div class="ttc" id="classcasadi_1_1CodeGenerator_html_a6e2b1aa6539ab215989bd0d879064ba1"><div class="ttname"><a href="../../d1/da2/classcasadi_1_1CodeGenerator.html#a6e2b1aa6539ab215989bd0d879064ba1">casadi::CodeGenerator::addAuxiliary</a></div><div class="ttdeci">void addAuxiliary(Auxiliary f)</div><div class="ttdoc">Add a built-in auxiliary function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d92/code__generator_8cpp_source.html#l00488">code_generator.cpp:488</a></div></div>
<div class="ttc" id="namespacecasadi_html_a14218f1c467799b937f3e272fceadbf4"><div class="ttname"><a href="../../d7/d23/namespacecasadi.html#a14218f1c467799b937f3e272fceadbf4">casadi::Orring</a></div><div class="ttdeci">static bvec_t Orring(bvec_t x, bvec_t y)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d9c/kernel__sum_8cpp_source.html#l00075">kernel_sum.cpp:75</a></div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="../../d8/dcc/namespacestd.html">std</a></div><div class="ttdoc">Convenience tools for C++ Standard Library vectors. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d76/casadi__instantiations_8cpp_source.html#l00063">casadi_instantiations.cpp:63</a></div></div>
<div class="ttc" id="classcasadi_1_1Function_html_aadcb24c10ee3aff3cedae8426ad9b8b9"><div class="ttname"><a href="../../da/da4/classcasadi_1_1Function.html#aadcb24c10ee3aff3cedae8426ad9b8b9">casadi::Function::sz_res</a></div><div class="ttdeci">size_t sz_res() const </div><div class="ttdoc">Get required length of res field. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/function_8cpp_source.html#l00670">function.cpp:670</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_a2c2f3f5e118cc1283f6f1537c9932bad"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#a2c2f3f5e118cc1283f6f1537c9932bad">casadi::FunctionInternal::alloc_res</a></div><div class="ttdeci">void alloc_res(size_t sz_res, bool persistent=false)</div><div class="ttdoc">Ensure required length of res field. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db4/function__internal_8cpp_source.html#l02268">function_internal.cpp:2268</a></div></div>
<div class="ttc" id="classcasadi_1_1KernelSum_html_a924bbd651bc9a1e215b284efbda6a5ec"><div class="ttname"><a href="../../dd/db9/classcasadi_1_1KernelSum.html#a924bbd651bc9a1e215b284efbda6a5ec">casadi::KernelSum::print</a></div><div class="ttdeci">virtual void print(std::ostream &amp;stream) const </div><div class="ttdoc">Print description. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d9c/kernel__sum_8cpp_source.html#l00465">kernel_sum.cpp:465</a></div></div>
<div class="ttc" id="classcasadi_1_1MX_html"><div class="ttname"><a href="../../de/d57/classcasadi_1_1MX.html">casadi::MX</a></div><div class="ttdoc">MX - Matrix expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dc6/mx_8hpp_source.html#l00058">mx.hpp:58</a></div></div>
<div class="ttc" id="namespacecasadi_html_ac0b357d13f0080474277728f87d771c2"><div class="ttname"><a href="../../d7/d23/namespacecasadi.html#ac0b357d13f0080474277728f87d771c2">casadi::Dict</a></div><div class="ttdeci">GenericType::Dict Dict</div><div class="ttdoc">C++ equivalent of Python&#39;s dict or MATLAB&#39;s struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d30/generic__type_8hpp_source.html#l00177">generic_type.hpp:177</a></div></div>
<div class="ttc" id="classcasadi_1_1KernelSum_html_ac5b905d68a7ed2bdd0c9ecf331adac07"><div class="ttname"><a href="../../dd/db9/classcasadi_1_1KernelSum.html#ac5b905d68a7ed2bdd0c9ecf331adac07">casadi::KernelSum::get_reverse</a></div><div class="ttdeci">virtual Function get_reverse(const std::string &amp;name, int nadj, Dict &amp;opts)</div><div class="ttdoc">Generate a function that calculates nadj adjoint derivatives. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d9c/kernel__sum_8cpp_source.html#l00281">kernel_sum.cpp:281</a></div></div>
<div class="ttc" id="classcasadi_1_1Sparsity_html_a8c70758855f75abad3fcb8defa6a08e9"><div class="ttname"><a href="../../d5/da8/classcasadi_1_1Sparsity.html#a8c70758855f75abad3fcb8defa6a08e9">casadi::Sparsity::dense</a></div><div class="ttdeci">static Sparsity dense(int nrow, int ncol=1)</div><div class="ttdoc">Create a dense rectangular sparsity pattern. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d65/sparsity_8cpp_source.html#l00781">sparsity.cpp:781</a></div></div>
<div class="ttc" id="classcasadi_1_1Function_html_a2dffbeee734a523a412be39d48cff9ff"><div class="ttname"><a href="../../da/da4/classcasadi_1_1Function.html#a2dffbeee734a523a412be39d48cff9ff">casadi::Function::sz_arg</a></div><div class="ttdeci">size_t sz_arg() const </div><div class="ttdoc">Get required length of arg field. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/function_8cpp_source.html#l00668">function.cpp:668</a></div></div>
<div class="ttc" id="classcasadi_1_1KernelSum_html_afc42c02d933fb0b9883d4356578af8d2"><div class="ttname"><a href="../../dd/db9/classcasadi_1_1KernelSum.html#afc42c02d933fb0b9883d4356578af8d2">casadi::KernelSum::eval</a></div><div class="ttdeci">virtual void eval(void *mem, const double **arg, double **res, int *iw, double *w) const </div><div class="ttdoc">Evaluate numerically, work vectors given. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d9c/kernel__sum_8cpp_source.html#l00131">kernel_sum.cpp:131</a></div></div>
<div class="ttc" id="classcasadi_1_1Function_html_a3e4c7bfd2ea071d5510081f258c82601"><div class="ttname"><a href="../../da/da4/classcasadi_1_1Function.html#a3e4c7bfd2ea071d5510081f258c82601">casadi::Function::sz_w</a></div><div class="ttdeci">size_t sz_w() const </div><div class="ttdoc">Get required length of w field. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/function_8cpp_source.html#l00674">function.cpp:674</a></div></div>
<div class="ttc" id="classcasadi_1_1Function_html_a4e3cf758fb84c9755670bc3689bf68cd"><div class="ttname"><a href="../../da/da4/classcasadi_1_1Function.html#a4e3cf758fb84c9755670bc3689bf68cd">casadi::Function::kernel_sum</a></div><div class="ttdeci">Function kernel_sum(const std::string &amp;name, const std::pair&lt; int, int &gt; &amp;size, double r, int n, const Dict &amp;opts=Dict()) const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/function_8cpp_source.html#l00498">function.cpp:498</a></div></div>
<div class="ttc" id="classcasadi_1_1KernelSum_html_a0bb90f44e2ee43fe28406937107a17b4"><div class="ttname"><a href="../../dd/db9/classcasadi_1_1KernelSum.html#a0bb90f44e2ee43fe28406937107a17b4">casadi::KernelSum::generateDeclarations</a></div><div class="ttdeci">virtual void generateDeclarations(CodeGenerator &amp;g) const </div><div class="ttdoc">Generate code for the declarations of the C function. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d9c/kernel__sum_8cpp_source.html#l00375">kernel_sum.cpp:375</a></div></div>
<div class="ttc" id="classcasadi_1_1CodeGenerator_html"><div class="ttname"><a href="../../d1/da2/classcasadi_1_1CodeGenerator.html">casadi::CodeGenerator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dde/code__generator_8hpp_source.html#l00036">code_generator.hpp:36</a></div></div>
<div class="ttc" id="classcasadi_1_1KernelSum_html_a62412b6f9bd87f8e7217b7738e463c6d"><div class="ttname"><a href="../../dd/db9/classcasadi_1_1KernelSum.html#a62412b6f9bd87f8e7217b7738e463c6d">casadi::KernelSum::~KernelSum</a></div><div class="ttdeci">virtual ~KernelSum()</div><div class="ttdoc">Destructor. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d9c/kernel__sum_8cpp_source.html#l00048">kernel_sum.cpp:48</a></div></div>
<div class="ttc" id="namespacecasadi_html_a28da13ca9291359e511803a448834e2a"><div class="ttname"><a href="../../d7/d23/namespacecasadi.html#a28da13ca9291359e511803a448834e2a">casadi::bvec_t</a></div><div class="ttdeci">unsigned long bvec_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d62/casadi__types_8hpp_source.html#l00089">casadi_types.hpp:89</a></div></div>
<div class="ttc" id="classcasadi_1_1Function_html_a9508670302dc4a6db03c5dd5ff61ff17"><div class="ttname"><a href="../../da/da4/classcasadi_1_1Function.html#a9508670302dc4a6db03c5dd5ff61ff17">casadi::Function::sz_iw</a></div><div class="ttdeci">size_t sz_iw() const </div><div class="ttdoc">Get required length of iw field. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/function_8cpp_source.html#l00672">function.cpp:672</a></div></div>
<div class="ttc" id="classcasadi_1_1GenericMatrix_html_aef7e7817a3072ed661a3274e86fac531"><div class="ttname"><a href="../../dc/df3/classcasadi_1_1GenericMatrix.html#aef7e7817a3072ed661a3274e86fac531">casadi::GenericMatrix&lt; MX &gt;::sym</a></div><div class="ttdeci">static MX sym(const std::string &amp;name, int nrow=1, int ncol=1)</div><div class="ttdoc">Create an nrow-by-ncol symbolic primitive. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d90/generic__matrix_8hpp_source.html#l00615">generic_matrix.hpp:615</a></div></div>
<div class="ttc" id="classcasadi_1_1Function_html_a9a1543987b51da58133f9994afabb102"><div class="ttname"><a href="../../da/da4/classcasadi_1_1Function.html#a9a1543987b51da58133f9994afabb102">casadi::Function::sparsity_in</a></div><div class="ttdeci">const Sparsity &amp; sparsity_in(int ind) const </div><div class="ttdoc">Get sparsity of a given input. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/function_8cpp_source.html#l00648">function.cpp:648</a></div></div>
<div class="ttc" id="classcasadi_1_1Function_html_a80de4df1ef234cf7e28c8755121ffb79"><div class="ttname"><a href="../../da/da4/classcasadi_1_1Function.html#a80de4df1ef234cf7e28c8755121ffb79">casadi::Function::name</a></div><div class="ttdeci">std::string name() const </div><div class="ttdoc">Name of the function. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/function_8cpp_source.html#l00927">function.cpp:927</a></div></div>
<div class="ttc" id="classcasadi_1_1KernelSum_html_a5a54fe50de01f69afb83483ba8234fb8"><div class="ttname"><a href="../../dd/db9/classcasadi_1_1KernelSum.html#a5a54fe50de01f69afb83483ba8234fb8">casadi::KernelSum::get_forward</a></div><div class="ttdeci">virtual Function get_forward(const std::string &amp;name, int nfwd, Dict &amp;opts)</div><div class="ttdoc">Generate a function that calculates nfwd forward derivatives. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d9c/kernel__sum_8cpp_source.html#l00202">kernel_sum.cpp:202</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html">casadi::FunctionInternal</a></div><div class="ttdoc">Internal class for Function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4f/function__internal_8hpp_source.html#l00069">function_internal.hpp:69</a></div></div>
<div class="ttc" id="classcasadi_1_1CodeGenerator_html_acb9e5d52881b89783af1aed9c128af84a48fd81e67b7209a0913b29e81eadd2ed"><div class="ttname"><a href="../../d1/da2/classcasadi_1_1CodeGenerator.html#acb9e5d52881b89783af1aed9c128af84a48fd81e67b7209a0913b29e81eadd2ed">casadi::CodeGenerator::AUX_AXPY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dde/code__generator_8hpp_source.html#l00120">code_generator.hpp:120</a></div></div>
<div class="ttc" id="classcasadi_1_1KernelSum_html_a7dd53b5d16099a30d3ee571de4d69440"><div class="ttname"><a href="../../dd/db9/classcasadi_1_1KernelSum.html#a7dd53b5d16099a30d3ee571de4d69440">casadi::KernelSum::size_</a></div><div class="ttdeci">std::pair&lt; int, int &gt; size_</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de7/kernel__sum_8hpp_source.html#l00109">kernel_sum.hpp:109</a></div></div>
<div class="ttc" id="classcasadi_1_1KernelSum_html_a0309eef2d48887c79ebec12825f17f9e"><div class="ttname"><a href="../../dd/db9/classcasadi_1_1KernelSum.html#a0309eef2d48887c79ebec12825f17f9e">casadi::KernelSum::step_out_</a></div><div class="ttdeci">std::vector&lt; int &gt; step_out_</div><div class="ttdoc">Nonzero step for outputs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de7/kernel__sum_8hpp_source.html#l00118">kernel_sum.hpp:118</a></div></div>
<div class="ttc" id="classcasadi_1_1Sparsity_html"><div class="ttname"><a href="../../d5/da8/classcasadi_1_1Sparsity.html">casadi::Sparsity</a></div><div class="ttdoc">General sparsity class. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da8/sparsity_8hpp_source.html#l00077">sparsity.hpp:77</a></div></div>
<div class="ttc" id="classcasadi_1_1FunctionInternal_html_ac60489b2183943b68a652f4f524f848a"><div class="ttname"><a href="../../d2/dab/classcasadi_1_1FunctionInternal.html#ac60489b2183943b68a652f4f524f848a">casadi::FunctionInternal::init</a></div><div class="ttdeci">virtual void init(const Dict &amp;opts)</div><div class="ttdoc">Initialize Initialize and make the object ready for setting arguments and evaluation. This method is typically called after setting options but before evaluating. If passed to another class (in the constructor), this class should invoke this function when initialized. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db4/function__internal_8cpp_source.html#l00265">function_internal.cpp:265</a></div></div>
<div class="ttc" id="classcasadi_1_1Function_html_a752108160bd0472701a966d9738d1e7e"><div class="ttname"><a href="../../da/da4/classcasadi_1_1Function.html#a752108160bd0472701a966d9738d1e7e">casadi::Function::reverse</a></div><div class="ttdeci">void reverse(const std::vector&lt; MX &gt; &amp;arg, const std::vector&lt; MX &gt; &amp;res, const std::vector&lt; std::vector&lt; MX &gt; &gt; &amp;aseed, std::vector&lt; std::vector&lt; MX &gt; &gt; &amp;output_asens, bool always_inline=false, bool never_inline=false)</div><div class="ttdoc">Create call to (cached) derivative function, reverse mode. </div></div>
<div class="ttc" id="classcasadi_1_1CodeGenerator_html_acb9e5d52881b89783af1aed9c128af84a29a0de1917bd78e14ff58583d544c740"><div class="ttname"><a href="../../d1/da2/classcasadi_1_1CodeGenerator.html#acb9e5d52881b89783af1aed9c128af84a29a0de1917bd78e14ff58583d544c740">casadi::CodeGenerator::AUX_FILL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dde/code__generator_8hpp_source.html#l00126">code_generator.hpp:126</a></div></div>
<div class="ttc" id="classcasadi_1_1CodeGenerator_html_acb9e5d52881b89783af1aed9c128af84a31d6fc50d6ad2b1d8e6df93f38ee840b"><div class="ttname"><a href="../../d1/da2/classcasadi_1_1CodeGenerator.html#acb9e5d52881b89783af1aed9c128af84a31d6fc50d6ad2b1d8e6df93f38ee840b">casadi::CodeGenerator::AUX_COPY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dde/code__generator_8hpp_source.html#l00117">code_generator.hpp:117</a></div></div>
<div class="ttc" id="classcasadi_1_1KernelSum_html_ae02d718d5b112aaefbd9f9a02f43bc5e"><div class="ttname"><a href="../../dd/db9/classcasadi_1_1KernelSum.html#ae02d718d5b112aaefbd9f9a02f43bc5e">casadi::KernelSum::nnz_out_</a></div><div class="ttdeci">int nnz_out_</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de7/kernel__sum_8hpp_source.html#l00115">kernel_sum.hpp:115</a></div></div>
<div class="ttc" id="namespacecasadi_html"><div class="ttname"><a href="../../d7/d23/namespacecasadi.html">casadi</a></div><div class="ttdoc">The casadi namespace. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d90/calculus_8hpp_source.html#l00040">calculus.hpp:40</a></div></div>
<div class="ttc" id="classcasadi_1_1KernelSum_html_a037f0cdd633aedc2fbc9d27d954134c3"><div class="ttname"><a href="../../dd/db9/classcasadi_1_1KernelSum.html#a037f0cdd633aedc2fbc9d27d954134c3">casadi::KernelSum::init</a></div><div class="ttdeci">virtual void init(const Dict &amp;opts)</div><div class="ttdoc">Initialize. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d9c/kernel__sum_8cpp_source.html#l00051">kernel_sum.cpp:51</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<hr class="footer"/>
Release pointers: <a href="https://github.com/casadi/casadi/tree/40d1934d2cb4eb46565debb8477cb04f4a3e2729/docs/examples/python">extensive python examples</a>, <a href="../../../../tutorials">tutorials</a>, Users Guide (<a href="../../../../users_guide/casadi-users_guide.pdf">pdf</a> | <a href="../../../../users_guide/html">html</a> )
<address class="footer"><small>
Generated for CasADi by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.8</small></address>
<br/>
Official releases: <a href="/3.0.0-rc1">3.0.0-rc1</a> <a href="/2.4.2">2.4.2</a> <a href="/2.3.0">2.3.0</a> <a href="/2.2.0">2.2.0</a> <a href="/2.1.1">2.1.1</a> <a href="/2.0.0">2.0.0</a> <a href="/1.9.0">1.9.0</a> <a href="/1.8.0">1.8.0</a> <a href="/1.7.1">1.7.1</a> <a href="/1.7.0">1.7.0</a> <a href="/1.6.1">1.6.1</a> <a href="/1.6.0">1.6.0</a> <a href="/1.5.0">1.5.0</a> <a href="/1.4.0">1.4.0</a> <a href="/1.3.0">1.3.0</a>
<b
<a href="/">bleeding edge</a>
</body>
</html>
